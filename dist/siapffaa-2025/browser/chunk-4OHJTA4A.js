import{b as H,e as X,f as Z,h as K,j as Y,k as ee,o as te,p as ie,q as re,t as ne,u as ae,v as oe,w as se,x as le,y as de}from"./chunk-ZPMKEMCQ.js";import{C as W,d as U,e as L,l as B,t as $,v as J,y as me,z as Q}from"./chunk-FIATBDAH.js";import{Bb as T,Ca as l,Cb as j,Db as V,Gb as x,Lb as r,Mb as A,Na as C,Nb as g,Ob as E,Qb as k,Rb as q,Sa as O,Sb as G,U as _,V as f,Ya as h,db as z,eb as D,gc as M,ib as c,jb as e,kb as i,lb as m,pb as N,qb as R,sb as F,wb as S,xb as u}from"./chunk-XJSKPFVT.js";import{f as ce,g as w}from"./chunk-OXVY4BEJ.js";var p=ce(me());var ue=["formIngreso"];function ge(o,d){o&1&&(e(0,"div",21)(1,"div",23),m(2,"i",24),e(3,"h4",25),r(4,"Sin registros pendientes"),i(),e(5,"p",26),r(6," Todo est\xE1 al d\xEDa. No se encontraron registros para mostrar. "),i()()())}function pe(o,d){if(o&1&&(e(0,"h5",47),r(1," Grado / Rango: "),e(2,"strong",48),r(3),i()()),o&2){let s=u().$implicit;l(3),A(s.equivalente)}}function ve(o,d){if(o&1&&(e(0,"h5",47),r(1," Grado / Rango: "),e(2,"strong",48),r(3),i()()),o&2){let s=u().$implicit;l(3),A(s.nombre_grado)}}function _e(o,d){if(o&1&&(e(0,"strong",49),r(1),i()),o&2){let s=u().$implicit;l(),g(" ",s.NombreFuerzaIngresar," ")}}function fe(o,d){if(o&1&&(e(0,"strong",40),r(1),i()),o&2){let s=u().$implicit;l(),g(" ",s.NombreFuerzaIngresar," ")}}function he(o,d){o&1&&(e(0,"strong",40),r(1," S\xED "),i())}function Se(o,d){o&1&&(e(0,"strong",50),r(1," No "),i())}function be(o,d){if(o&1){let s=F();e(0,"div",34)(1,"div",35),m(2,"img",36),e(3,"div",37),h(4,pe,4,1,"h5",38)(5,ve,4,1,"ng-template",null,0,M),e(7,"p",39),r(8," Autorizados: "),e(9,"strong",40),r(10),i()(),e(11,"p",39),r(12," Fuerza: "),h(13,_e,2,1,"strong",41)(14,fe,2,1,"ng-template",null,1,M),i(),e(16,"p",39),r(17," Unidad: "),e(18,"strong",40),r(19),i()(),e(20,"p",42),r(21," Combatiente: "),h(22,he,2,0,"strong",43)(23,Se,2,0,"ng-template",null,2,M),i(),e(25,"div",44)(26,"button",45),S("click",function(){let n=_(s).$implicit,a=u(3);return f(a.registrarPaso_1(n,2))}),m(27,"i",46),r(28," Registrar "),i()()()()()}if(o&2){let s=d.$implicit,t=x(6),n=x(15),a=x(24);l(4),c("ngIf",s.FuerzaIngresar===2)("ngIfElse",t),l(6),A(s.autorizado),l(3),c("ngIf",s.NombreFuerzaIngresar==="Error")("ngIfElse",n),l(6),A(s.unidad),l(3),c("ngIf",s.combatiente===1)("ngIfElse",a)}}function xe(o,d){if(o&1&&(e(0,"div",32),h(1,be,29,8,"div",33),i()),o&2){let s=u(2);l(),c("ngForOf",s.arregloRegistros)}}function Ee(o,d){if(o&1&&(e(0,"option",122),r(1),i()),o&2){let s=d.$implicit;c("ngValue",s),l(),g(" ",s.departamento," ")}}function Ce(o,d){if(o&1&&(e(0,"option",122),r(1),i()),o&2){let s=d.$implicit;c("ngValue",s.idmunicipio),l(),g(" ",s.municipio," ")}}function Ae(o,d){if(o&1&&(N(0),e(1,"option",122),r(2),i(),R()),o&2){let s=d.$implicit;l(),c("ngValue",s.idbanco),l(),g(" ",s.nombre," ")}}function Ie(o,d){o&1&&(e(0,"div",123)(1,"span",124),r(2,"Cargando..."),i()())}function Pe(o,d){if(o&1){let s=F();e(0,"button",118),S("click",function(){_(s);let n=u(3);return f(n.guardar_personal_nuevo())}),m(1,"i",125),r(2," Guardar "),i()}}function Fe(o,d){if(o&1){let s=F();e(0,"div")(1,"div",51)(2,"div",52)(3,"div",53)(4,"div",54)(5,"h2",55),r(6," FORMULARIO DE PRIMER INGRESO "),i(),m(7,"hr",56),e(8,"form",32,3)(10,"div",57)(11,"div",58)(12,"label",59),r(13," Nombre completo: "),i(),e(14,"div",60),m(15,"input",61,4),i()()(),e(17,"div",57)(18,"div",58)(19,"label",59),r(20," Apellidos: "),i(),e(21,"div",60),m(22,"input",62,5),i()()(),e(24,"div",57)(25,"div",58)(26,"label",59),r(27," Tipo de sangre: "),i(),e(28,"div",60)(29,"select",63,6)(31,"option",64),r(32,"A+"),i(),e(33,"option",65),r(34,"A-"),i(),e(35,"option",66),r(36,"O+"),i(),e(37,"option",67),r(38,"O-"),i(),e(39,"option",68),r(40,"B+"),i(),e(41,"option",69),r(42,"B-"),i(),e(43,"option",70),r(44,"AB+"),i(),e(45,"option",71),r(46,"AB-"),i()()()()(),e(47,"div",57)(48,"div",58)(49,"label",59),r(50," Fecha de nacimiento: "),i(),e(51,"div",60),m(52,"input",72,7),i()()(),e(54,"div",57)(55,"div",58)(56,"label",59),r(57," G\xE9nero: "),i(),e(58,"div",60)(59,"select",73,8)(61,"option",74),r(62,"Masculino"),i(),e(63,"option",75),r(64,"Femenino"),i()()()()(),e(65,"div",57)(66,"div",58)(67,"label",59),r(68," Departamento: "),i(),e(69,"div",60)(70,"select",76,9),S("change",function(){_(s);let n=x(9),a=u(2);return f(a.sacarmunicipio(n))}),h(72,Ee,2,2,"option",77),i()()()(),e(73,"div",57)(74,"div",58)(75,"label",59),r(76," Lugar de nacimiento (municipio): "),i(),e(77,"div",60)(78,"select",78,10),h(80,Ce,2,2,"option",77),i()()()(),e(81,"div",57)(82,"div",58)(83,"label",59),r(84," Estado civil: "),i(),e(85,"div",60)(86,"select",79,11)(88,"option",80),r(89,"Soltero(a)"),i(),e(90,"option",81),r(91,"Casado(a)"),i(),e(92,"option",82),r(93,"Viudo(a)"),i(),e(94,"option",83),r(95,"Divorciado(a)"),i(),e(96,"option",84),r(97,"Uni\xF3n libre"),i()()()()(),e(98,"div",57)(99,"div",58)(100,"label",59),r(101," Identidad: "),i(),e(102,"div",60),m(103,"input",85,12),i()()(),e(105,"div",57)(106,"div",58)(107,"label",59),r(108," RTN: "),i(),e(109,"div",60),m(110,"input",86,13),i()()(),e(112,"div",57)(113,"div",58)(114,"label",59),r(115," Nivel educativo: "),i(),e(116,"div",60)(117,"select",87,14)(119,"option",88),r(120,"Preb\xE1sica"),i(),e(121,"option",89),r(122,"B\xE1sica"),i(),e(123,"option",90),r(124,"Media"),i(),e(125,"option",91),r(126,"Superior"),i(),e(127,"option",92),r(128,"No aplica"),i()()()()(),e(129,"div",57)(130,"div",58)(131,"label",59),r(132," Religi\xF3n: "),i(),e(133,"div",60)(134,"select",93,15)(136,"option",94),r(137,"Cat\xF3lica"),i(),e(138,"option",95),r(139,"Evang\xE9lico"),i(),e(140,"option",96),r(141,"Morm\xF3n"),i(),e(142,"option",97),r(143,"Sin religi\xF3n"),i()()()()(),e(144,"div",57)(145,"div",58)(146,"label",59),r(147," Direcci\xF3n exacta: "),i(),e(148,"div",60),m(149,"input",98,16),i()()(),e(151,"div",57)(152,"div",58)(153,"label",59),r(154," Cuenta de banco: "),i(),e(155,"div",60),m(156,"input",99,17),i()()(),e(158,"div",57)(159,"div",58)(160,"label",59),r(161," Tipo de banco: "),i(),e(162,"div",60)(163,"select",100,18),h(165,Ae,3,2,"ng-container",101),i()()()(),e(166,"div",57)(167,"div",58)(168,"label",59),r(169," N\xFAmero de pasaporte: "),i(),e(170,"div",60),m(171,"input",102,19),i()()(),e(173,"div",103)(174,"button",104),S("click",function(){_(s);let n=u(2);return f(n.atrasFormularioPersona(1,0,0))}),m(175,"i",105),r(176," Atr\xE1s "),i(),e(177,"button",106),S("click",function(){_(s);let n=u(2);return f(n.guardarPersonal(2))}),m(178,"i",107),r(179," Siguiente "),i()()()()()()(),e(180,"div",108)(181,"div",52)(182,"div",53)(183,"div",54)(184,"button",109),S("click",function(){_(s);let n=u(2);return f(n.ver2())}),r(185,"VErrrr"),i(),e(186,"h2",55),r(187," FORMULARIO ASCENSO "),i(),m(188,"hr",56),e(189,"form",32)(190,"div",57)(191,"div",110)(192,"div",111)(193,"label",112),r(194,"Fecha de ingreso"),i(),e(195,"p",113),r(196),i()(),e(197,"div",114)(198,"label",112),r(199,"Fecha de ascenso"),i(),e(200,"p",113),r(201),i()()()(),e(202,"div",57)(203,"div",115)(204,"div",114)(205,"label",112),r(206,"Nombre completo"),i(),e(207,"p",113),r(208),i()(),e(209,"div",114)(210,"label",112),r(211,"Identidad"),i(),e(212,"p",113),r(213),i()()()(),e(214,"div",57)(215,"div",115)(216,"div",114)(217,"label",112),r(218,"Categor\xEDa"),i(),e(219,"p",113),r(220),i()(),e(221,"div",114)(222,"label",112),r(223,"Grado"),i(),e(224,"p",113),r(225),i()()()(),e(226,"div",57)(227,"div",115)(228,"div",114)(229,"label",112),r(230,"Fuerza"),i(),e(231,"p",113),r(232),i()(),e(233,"div",114)(234,"label",112),r(235,"Unidad de ingreso"),i(),e(236,"p",113),r(237),i()()()(),e(238,"div",57)(239,"label",112),r(240,"N\xFAmero de acuerdo"),i(),e(241,"input",116),G("ngModelChange",function(n){_(s);let a=u(2);return q(a.ingresoAscenso.numeroAcuerdo,n)||(a.ingresoAscenso.numeroAcuerdo=n),f(n)}),i()(),e(242,"div",103)(243,"button",117),S("click",function(){_(s);let n=u(2);return f(n.atrasFormularioPersona(1,0,0))}),m(244,"i",105),r(245," Atr\xE1s "),i(),e(246,"button",118),S("click",function(){_(s);let n=u(2);return f(n.siguienteAsignacion())}),m(247,"i",107),r(248," Siguiente "),i()()()()()()(),e(249,"div",108)(250,"div",52)(251,"div",53)(252,"div",54)(253,"h2",55),r(254," FORMULARIO PARA ASIGNACI\xD3N "),i(),m(255,"hr",56),e(256,"form",32)(257,"div",57)(258,"div",110)(259,"div",111)(260,"label",112),r(261,"Fecha de ingreso"),i(),e(262,"p",113),r(263),i()(),e(264,"div",114)(265,"label",112),r(266,"Fecha de ascenso"),i(),e(267,"p",113),r(268),i()()()(),e(269,"div",57)(270,"div",115)(271,"div",114)(272,"label",112),r(273,"Nombre completo"),i(),e(274,"p",113),r(275),i()(),e(276,"div",114)(277,"label",112),r(278,"Identidad"),i(),e(279,"p",113),r(280),i()()()(),e(281,"div",57)(282,"label",112),r(283,"Unidad de asignaci\xF3n"),i(),e(284,"p",113),r(285),i()(),e(286,"div",103)(287,"button",117),S("click",function(){_(s);let n=u(2);return f(n.atrasFormularioPersona(0,1,0))}),m(288,"i",105),r(289," Atr\xE1s "),i(),e(290,"div",119),h(291,Ie,3,0,"div",120)(292,Pe,3,0,"button",121),i()()()()()()()()}if(o&2){let s=x(9),t=u(2);l(),c("hidden",t.pasosFormulario.p1!==1),l(71),c("ngForOf",t.arregloDepartamento),l(8),c("ngForOf",t.arreglomunicipio),l(85),c("ngForOf",t.arregloBancos),l(12),c("disabled",!s.valid),l(3),c("hidden",t.pasosFormulario.p2!==1),l(16),g(" ",t.ingresoAscenso.fecha_ingreso," "),l(5),g(" ",t.ingresoAscenso.fecha_ingreso," "),l(7),g(" ",t.ingresoAscenso.nombre_Completo," "),l(5),g(" ",t.ingresoAscenso.identidad," "),l(7),E(" C\xF3digo: ",t.ingresoAscenso==null?null:t.ingresoAscenso.categoria," - ",t.categoriaAsignar==null?null:t.categoriaAsignar.categoria," "),l(5),E(" C\xF3digo: ",t.ingresoAscenso.grado," - ",t.gradoSelected.nombre_grado," "),l(7),E(" C\xF3digo: ",t.ingresoAscenso.fuerza," - ",t.fuerzaSelected.NombreFuerza," "),l(5),E(" C\xF3digo: ",t.ingresoAscenso.unidad," - ",t.unidadDelIngreso.corto," "),l(4),k("ngModel",t.ingresoAscenso.numeroAcuerdo),c("readonly",t.banderabloqContrado),l(8),c("hidden",t.pasosFormulario.p3!==1),l(14),g(" ",t.ingresoAscenso.fecha_ingreso," "),l(5),g(" ",t.ingresoAscenso.fecha_ingreso," "),l(7),g(" ",t.ingresoAscenso.nombre_Completo," "),l(5),g(" ",t.ingresoAscenso.identidad," "),l(5),E(" C\xF3digo: ",t.ingresoAscenso.unidad," - ",t.unidadDelIngreso.corto," "),l(6),c("ngIf",t.spinner===1),l(),c("ngIf",t.spinner===0)}}function Me(o,d){if(o&1&&(e(0,"div",27)(1,"div",28)(2,"div",29),h(3,xe,2,1,"div",30)(4,Fe,293,29,"div",31),i()()()),o&2){let s=u();l(3),c("ngIf",s.banderaPersonal===1),l(),c("ngIf",s.banderaPersonal===2)}}var Ve=(()=>{let d=class d{constructor(t,n,a,v){this._ActivatedRoute=t,this._DatospersonalesService=n,this._ServiciosMensajeService=a,this._Router=v,this.banderaPersonal=1,this.pasoPasoForm=0,this.pasosFormulario={p1:0,p2:0,p3:0,p4:0},this.banderaVentanaPrincipal="1",this.arregloAbrisCupos=new Array,this.banderabloqContrado=!1,this.arregloRegistros=new Array,this.noesvalido=!1,this.arregloFuerzas=new Array,this.arregloUnidades=new Array,this.arregloCategoria=new Array,this.arregloPaises=new Array,this.arregloDepartamento=new Array,this.arreglomunicipio=new Array,this.arregloBancos=new Array,this.arregloGrados=new Array,this.PedirGrado=0,this.datopersona=0,this.ingresoAscenso={fecha_ingreso:"",fecha_ascenso:"",nombre_Completo:"",identidad:"",categoria:"",grado:"",fuerza:"",fuerzaAsignacion:"",unidad:"",banderaPrimerIngreso:"",numeroAcuerdo:"",identidadElaborado:""},this.spinner=0,this.arregloPersonal=new Array,this.FilesToUploads=new Array,this.identidadregex=/^[0-9]*$/,this.rtnregex=/^[0-9]*$/,this.imgURL="",this.message="",this.loading=!1,this.idcategoria_validarRTN=[1,6,8,10,11,12,13,14,15,16,17,18,19,20],this._ActivatedRoute.params.subscribe(I=>{this.banderaVentanaPrincipal=I.id,this.banderaVentanaPrincipal==="1"?this.banderaPersonal=1:this.banderaPersonal=0})}sacarCategoria(){var t={servicio:"AUX' or codigo='TRO' or codigo='EST",general:"CAD"};this._DatospersonalesService.sacarCategoria(t).subscribe(n=>{this.arregloCategoria=n.resultado})}sacarPaises(){this._DatospersonalesService.sacarpaises().subscribe(t=>{this.arregloPaises=t.resultado})}sacarFuerza(){this._DatospersonalesService.sacarFuerza().subscribe(t=>{this.arregloFuerzas=t.resultado})}sacarBancos(){this._DatospersonalesService.sacarbancos().subscribe(t=>{console.log(t),this.arregloBancos=t.resultado})}sacarDEpartamentos(){let t={idpaises:137};this._DatospersonalesService.sacardepartamento(t).subscribe(n=>{this.arregloDepartamento=n.resultado})}sacarFechaServer(){this._DatospersonalesService.sacarFecha().subscribe(t=>{var n=t.fecha.split("/");this.anoActual=n[2],this.mesdelAno=n[1],this.fechaDelserver=new Date(n[2]+"-"+n[1]+"-"+n[0])})}ngOnInit(){this.sacarCupos(),this.usuarioLogiado=JSON.parse(localStorage.getItem("user_login")).user,this.sacarCategoria(),this.sacarFuerza(),this.sacarPaises(),this.sacarBancos(),this.sacarDEpartamentos(),this.sacarFechaServer()}guardarPersonal(t){var n=this.unidadDelIngreso.FechaIngresar.split("/");this.ingresoAscenso.fecha_ingreso=n[2]+"-"+n[1]+"-"+n[0],this.banderabloqContrado=!1,this.categoriaAsignar=this.arregloCategoria.find(v=>v.idcategoria===this.categoriaSelected.idcategoria),this.ingresoAscenso.nombre_Completo=this.formIngreso.value.nombre+" "+this.formIngreso.value.apellidos,this.ingresoAscenso.identidad=this.formIngreso.value.identidad,this.ingresoAscenso.categoria=this.categoriaAsignar.idcategoria,this.ingresoAscenso.grado=this.gradoSelected.idgrado,this.ingresoAscenso.fuerza=this.fuerzaSelected.FuerzaIngresar,this.ingresoAscenso.unidad=this.unidadDelIngreso.idunidad,this.ingresoAscenso.fuerzaAsignacion=this.fuerzaSelected.idfuerza,this.ingresoAscenso.identidadElaborado=JSON.parse(localStorage.getItem("user_login")).user.identidad,this.ingresoAscenso.banderaPrimerIngreso="1";var a="";this.categoriaAsignar.idcategoria===2||this.categoriaAsignar.idcategoria===4||this.categoriaAsignar.idcategoria===3?(this.categoriaAsignar.idcategoria===2?parseInt(this.mesdelAno)<12?a="Cabie 01-"+this.anoActual:a="Cabie 02-"+this.anoActual:this.categoriaAsignar.idcategoria===4?a="Cadete-"+this.anoActual:this.categoriaAsignar.idcategoria===3&&(a="Estudiante-"+this.anoActual),this.pasosFormulario.p1=0,this.pasosFormulario.p2=1,this.banderabloqContrado=!0,this.ingresoAscenso.numeroAcuerdo=a):this.ingresoAscenso.numeroAcuerdo=""}siguienteAsignacion(){this.ingresoAscenso.numeroAcuerdo===""||this.ingresoAscenso.numeroAcuerdo===null||this.ingresoAscenso.numeroAcuerdo===void 0?this._DatospersonalesService.mensajeError("INGRESE EL NUMERO DE ACUERDO"):this.ingresoAscenso.fecha_ingreso===""||this.ingresoAscenso.fecha_ingreso===null||this.ingresoAscenso.fecha_ingreso===void 0?this._DatospersonalesService.mensajeError("SELECCIONE LA FECHA DE INGRESO"):(this.ingresoAscenso.fecha_ascenso=this.ingresoAscenso.fecha_ingreso,this.atrasFormularioPersona(0,0,1))}sacarunidad(){this._DatospersonalesService.sacarunidad(this.fuerzaSelected).subscribe(t=>{this.arregloUnidades=t.resultado})}sacarmunicipio(t){var n={iddepartamento:t.value.departamentoselected.iddepartamento,prueba:"prueba"};console.log(t.value),this.arreglomunicipio=[],this._ServiciosMensajeService.show(),this._DatospersonalesService.sacarmunicipio(n).subscribe({next:a=>{if(console.log(a),this._ServiciosMensajeService.hide(),a.error)return this._ServiciosMensajeService.mensajeMalo(a.error);if(a.mensaje)return this._ServiciosMensajeService.mensajeMalo(a.error);this.arreglomunicipio=a.resultado},error:()=>{this._ServiciosMensajeService.hide()}})}preview(t,n){if(this.fileChangeEvenet(n),t.length!==0){var a=t[0].type;if(a.match(/image\/*/)!=null){var v=new FileReader;v.readAsDataURL(t[0]),v.onload=I=>{this.imgURL=v.result}}}}fileChangeEvenet(t){this.FilesToUploads=t.target.files}probar(t){this.makeFileReques(this._DatospersonalesService.url2+"subirArchivo/"+this.formIngreso.value.identidad,[],this.FilesToUploads).then(n=>{this.imgURL="",n.error?this._DatospersonalesService.mensajeError(n.error):n.mesaje?this._DatospersonalesService.mensajeError(n.mensaje):(this._DatospersonalesService.mensajeBueno(n.resultado),this.banderaPersonal=t)})}probar2(){}makeFileReques(t,n,a){return new Promise((v,I)=>{var y=new FormData,b=new XMLHttpRequest;if(a===void 0)this._DatospersonalesService.mensajeError("SELECCIONE LA FOTO DE PERFIL");else{for(let P=0;P<a.length;P++)y.append("files",a[P],a[P].name);b.onreadystatechange=function(){b.readyState==4&&(b.status==200?v(JSON.parse(b.response)):I(b.response))},b.open("POST",t,!0),b.send(y)}})}ver2(){console.log(this.fechaingreso.value)}ver(){if(this.banderaPersonal=0,this.arregloGrados=new Array,this.fechaingreso.value.condicionDe===2){var t={grado_pertenece_a:3};this._DatospersonalesService.sacarGrados(t).subscribe(n=>{this.PedirGrado=1,this.arregloGrados=n.resultado})}else if(this.fechaingreso.value.condicionDe===1){var t={grado_pertenece_a:0};this._DatospersonalesService.sacarGrados(t).subscribe(a=>{this.PedirGrado=1,this.arregloGrados=a.resultado})}else{if(this.fechaingreso.value.condicionDe===3){var t={grado_pertenece_a:6};this._DatospersonalesService.sacarGrados(t).subscribe(a=>{this.PedirGrado=1,this.arregloGrados=a.resultado})}else if(this.fechaingreso.value.condicionDe===4){var t={grado_pertenece_a:5};this._DatospersonalesService.sacarGrados(t).subscribe(a=>{this.PedirGrado=1,this.arregloGrados=a.resultado})}this.PedirGrado=0}}VerInformacion(t){p.default.fire("INFORMACI\xD3N",t,"question")}sacarGrados(t){var n={idgrados:t};this.banderaPersonal=0,this.datopersona=0,this._DatospersonalesService.sacargradosporid(n).subscribe(a=>{this.arregloGrados=a.resultado})}quefuerzaSelecciono(){this.banderaPersonal=1,this._DatospersonalesService.sacarunidad(this.fuerzaSelected).subscribe(t=>{this.arregloUnidades=t.resultado}),this.fuerzaSelected.idfuerza===2?(p.default.fire("Fuerza Naval"),this.quefuerzaSelected=2):this.fuerzaSelected.idfuerza===3?(p.default.fire("Fuerza Ejercito"),this.quefuerzaSelected=3):this.fuerzaSelected.idfuerza===4?(p.default.fire("Fuerza Aerea"),this.quefuerzaSelected=4):(this.quefuerzaSelected=0,p.default.fire("Seleccione una de las tres fuerzas"))}quefuerzaSeleccionoAuxiliar(){this.fuerzaSelected==="2"?p.default.fire("Fuerza Naval"):this.fuerzaSelected==="3"?p.default.fire("Fuerza Ejercito"):this.fuerzaSelected==="4"?p.default.fire("Fuerza Aerea"):this.fuerzaSelected==="6"?p.default.fire("Policia M ilitar de Orden Publico"):p.default.fire("Seleccione una de las cuatro fuerzas")}pedirdatoPersona(){this.quefuerzaSelected=0,this.datopersona=1}atrasFormularioPersona(t,n,a){this.pasosFormulario.p1=t,this.pasosFormulario.p2=n,this.pasosFormulario.p3=a}sacarCupos(){this.arregloRegistros=[];var t={activo:1,idunidad:JSON.parse(localStorage.getItem("user_login")).user.idunidad};this._ServiciosMensajeService.show(),this._DatospersonalesService.sacarToeUnidad(t).subscribe({next:n=>{if(this._ServiciosMensajeService.hide(),n.error)return this._DatospersonalesService.mensajeError(n.error);if(!n.mensaje){for(let a=0;a<n.resultado.length;a++)n.resultado[a].FuerzaIngresar===3?n.resultado[a].NombreFuerzaIngresar="Ejercito":n.resultado[a].FuerzaIngresar===2?n.resultado[a].NombreFuerzaIngresar="Naval":n.resultado[a].FuerzaIngresar===4?n.resultado[a].NombreFuerzaIngresar="Aereo":n.resultado[a].FuerzaIngresar===6?n.resultado[a].NombreFuerzaIngresar="PMOP":n.resultado[a].NombreFuerzaIngresar="Error";this.banderaVentanaPrincipal="1",this.banderaPersonal=1,this.arregloRegistros=n.resultado}},error:()=>{this._ServiciosMensajeService.hide(),this._DatospersonalesService.mensajeError("Error de conexion | Problema")}})}registrarPaso_1(t,n){this.Card_Selecionado=t,t.NombreFuerzaIngresar==="Error"?p.default.fire({position:"top-end",icon:"error",title:"LA FUERZA CONTIENE UN ERROR, CONTACTESE CON SOPORTE TECNICO",showConfirmButton:!1,timer:2e3}):t.idcategoria>=5?p.default.fire({position:"top-end",icon:"error",title:"ERROR DE CATEGORIA, CONTACTESE CON SOPORTE TECNICO",showConfirmButton:!1,timer:2e3}):(this.gradoSelected=t,this.fuerzaSelected=t,this.unidadDelIngreso=t,this.categoriaSelected=t,t.autorizado<=0?p.default.fire({position:"top-end",icon:"error",title:"NO CUENTA CON CUPOS AUTORIZADOS",showConfirmButton:!1,timer:1500}):(this.banderaPersonal=n,this.pasosFormulario.p1=1))}guardar_personal_nuevo(){return w(this,null,function*(){if(this.idcategoria_validarRTN.includes(parseInt(this.ingresoAscenso.categoria))&&this.formIngreso.value.rtn==="")return this._DatospersonalesService.mensajeError("El rtn es obligatorio para esta categoria");this.formIngreso.value.rtn===""||this.formIngreso.value.rtn;var t={persona:this.formIngreso.value,ascenso:this.ingresoAscenso,ejecutado_por:this.usuarioLogiado.identidad,card:this.Card_Selecionado,usuario:this.usuarioLogiado};console.log(t),(yield this._DatospersonalesService.mensajePregunta("Precaucion","Esta seguro de guardar los datos"))&&(this.formIngreso.value.combatiente=this.categoriaSelected.combatiente,this.formIngreso.value.numero_pasaporte=this.formIngreso.value.numero_pasaporte===""?"----":this.formIngreso.value.numero_pasaporte,this._ServiciosMensajeService.show(),this._DatospersonalesService.guardarDatosPersonales(t).subscribe({next:a=>{if(this._ServiciosMensajeService.hide(),a.error)return this._DatospersonalesService.mensajeError(a.error);a.resultado?(this._DatospersonalesService.mensajeBueno(a.resultado),this.banderaPersonal=1,this.formIngreso.reset(),this.ingresoAscenso={fecha_ingreso:"",fecha_ascenso:"",nombre_Completo:"",identidad:"",categoria:"",grado:"",fuerza:"",fuerzaAsignacion:"",unidad:"",banderaPrimerIngreso:"",numeroAcuerdo:"",identidadElaborado:""}):(this._DatospersonalesService.mensajeError(a.mensaje),this.banderaPersonal=1,this.formIngreso.reset(),this.ingresoAscenso={fecha_ingreso:"",fecha_ascenso:"",nombre_Completo:"",identidad:"",categoria:"",grado:"",fuerza:"",fuerzaAsignacion:"",unidad:"",banderaPrimerIngreso:"",numeroAcuerdo:"",identidadElaborado:""}),this.sacarCupos(),this.atrasFormularioPersona(0,0,0)},error:()=>{this._ServiciosMensajeService.hide(),this._DatospersonalesService.mensajeError("Error de conexion | Problema")}}))})}sacarcoposhabilitadosdelaunidad(){var t={idunidad:this.unidadSelected.idunidad};this._DatospersonalesService.sacarcoposhabilitados(t).subscribe(n=>{n.mensaje?this._DatospersonalesService.mensajeError(n.mensaje):(this.arregloAbrisCupos=n.resultado,this.banderaVentanaPrincipal="3")},n=>{this._DatospersonalesService.mensajeError(n)})}verificarPermiso(t){return this._DatospersonalesService.verificarPermisos(t)}atrasMenu(t){this._Router.navigate([t])}};d.\u0275fac=function(n){return new(n||d)(C($),C(W),C(Q),C(J))},d.\u0275cmp=O({type:d,selectors:[["app-registrar-personal"]],viewQuery:function(n,a){if(n&1&&T(ue,5),n&2){let v;j(v=V())&&(a.formIngreso=v.first)}},decls:3,vars:2,consts:[["gradoNormal",""],["fuerzaOk",""],["noCombatiente",""],["formIngreso","ngForm"],["nombre","ngModel"],["apellidos","ngModel"],["tipo_sangre","ngModel"],["fecha_nacimiento","ngModel"],["sexo","ngModel"],["departamentoselected","ngModel"],["lugar_nacimiento","ngModel"],["estado_civil","ngModel"],["identidad","ngModel"],["rtn","ngModel"],["nivel_educativo","ngModel"],["religion","ngModel"],["direccion_exacta","ngModel"],["cuenta_banco","ngModel"],["banco","ngModel"],["numero_pasaporte","ngModel"],[1,"registro-wrapper","container-fluid"],[1,"no-registros-wrapper","text-center","p-4","my-4"],["class","mt-3",4,"ngIf"],[1,"no-registros-card","mx-auto"],[1,"pi","pi-inbox","no-registros-icon",2,"font-size","100px"],[1,"no-registros-title",2,"color","blue"],[1,"no-registros-text"],[1,"mt-3"],[1,"panel-card","panel-card--success","h-100","d-flex","flex-column"],[1,"panel-body"],["class","row g-3",4,"ngIf"],[4,"ngIf"],[1,"row","g-3"],["class","col-12 col-sm-6 col-md-4 col-lg-3",4,"ngFor","ngForOf"],[1,"col-12","col-sm-6","col-md-4","col-lg-3"],[1,"card","registro-card","h-100","shadow-sm"],["src","imagenregistro.jpg","alt","Imagen registro",1,"card-img-top","registro-card-img"],[1,"card-body","registro-card-body","d-flex","flex-column"],["class","card-title mb-2",4,"ngIf","ngIfElse"],[1,"mb-1","text-sm"],[1,"text-primary"],["class","text-danger",4,"ngIf","ngIfElse"],[1,"mb-3","text-sm"],["class","text-primary",4,"ngIf","ngIfElse"],[1,"mt-auto"],["type","button",1,"btn","btn-sm","btn-primary","w-100",3,"click"],[1,"pi","pi-user-plus","me-2"],[1,"card-title","mb-2"],[1,"text-primary","d-block","mt-1"],[1,"text-danger"],[1,"text-warning"],[1,"row","justify-content-center",3,"hidden"],[1,"col-12","col-lg-10"],[1,"card","shadow-sm","rounded-4"],[1,"card-body","p-4"],[1,"form-step-title","text-center","mb-3"],[1,"mb-4"],[1,"col-12"],[1,"row","align-items-center"],[1,"col-sm-3","col-form-label","col-form-label-sm"],[1,"col-sm-9"],["type","text","name","nombre","ngModel","","required","",1,"form-control","form-control-sm"],["type","text","name","apellidos","ngModel","","required","",1,"form-control","form-control-sm"],["name","tipo_sangre","ngModel","","required","",1,"form-select","form-select-sm"],["value","A+"],["value","A-"],["value","O+"],["value","O-"],["value","B+"],["value","B-"],["value","AB+"],["value","AB-"],["type","date","name","fecha_nacimiento","ngModel","","required","",1,"form-control","form-control-sm"],["name","sexo","ngModel","","required","",1,"form-select","form-select-sm"],["value","M"],["value","F"],["name","departamentoselected","ngModel","","required","",1,"form-select","form-select-sm",3,"change"],[3,"ngValue",4,"ngFor","ngForOf"],["name","lugar_nacimiento","ngModel","","required","",1,"form-select","form-select-sm"],["name","estado_civil","ngModel","","required","",1,"form-select","form-select-sm"],["value","Soltero(a)"],["value","Casado(a)"],["value","Viudo(a)"],["value","Divorciado(a)"],["value","Union Libre"],["type","text","name","identidad","ngModel","","required","","pattern","^[0-9]*$","maxlength","13","minlength","13","required","",1,"form-control","form-control-sm"],["type","text","name","rtn","ngModel","","required","","pattern","^[0-9]*$",1,"form-control","form-control-sm"],["name","nivel_educativo","ngModel","","required","",1,"form-select","form-select-sm"],["value","Preb\xE1sica"],["value","B\xE1sica"],["value","Media "],["value","Superior"],["value","No aplica"],["name","religion","ngModel","","required","",1,"form-select","form-select-sm"],["value","Catolica"],["value","Evangelico"],["value","Mormon"],["value","Sin Religion"],["type","text","ngModel","","name","direccion_exacta","required","",1,"form-control","form-control-sm"],["type","text","required","","ngModel","","name","cuenta_banco",1,"form-control","form-control-sm"],["name","banco","ngModel","","required","",1,"form-select","form-select-sm"],[4,"ngFor","ngForOf"],["type","text","ngModel","","name","numero_pasaporte",1,"form-control","form-control-sm"],[1,"col-12","mt-3","d-flex","justify-content-center","gap-3"],["type","button",1,"btn","btn-outline-secondary","btn-lg","px-4",3,"click"],[1,"pi","pi-arrow-left","me-2"],["type","button",1,"btn","btn-success","btn-lg","px-4",3,"click","disabled"],[1,"pi","pi-arrow-right","me-2"],[1,"row","justify-content-center","mt-3",3,"hidden"],[3,"click"],[1,"row"],[1,"col-sm-6","mb-2","mb-sm-0"],[1,"form-label","form-label-sm"],[1,"form-control","form-control-sm-plain"],[1,"col-sm-6"],[1,"row","g-2"],["type","text","name","numeroAcuerdo",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","readonly"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],[1,"d-flex","align-items-center","gap-2"],["class","spinner-border text-dark","role","status",4,"ngIf"],["type","button","class","btn btn-warning",3,"click",4,"ngIf"],[3,"ngValue"],["role","status",1,"spinner-border","text-dark"],[1,"visually-hidden"],[1,"pi","pi-cloud-upload","me-2"]],template:function(n,a){n&1&&(e(0,"div",20),z(1,ge,7,0,"div",21),h(2,Me,5,2,"div",22),i()),n&2&&(l(),D(a.arregloRegistros.length===0?1:-1),l(),c("ngIf",a.banderaVentanaPrincipal==="1"))},dependencies:[B,U,L,le,ee,ie,re,H,te,X,Z,ne,ae,oe,se,Y,K,de],styles:[".form-wrapper[_ngcontent-%COMP%]{margin-top:1.2rem;display:flex;justify-content:center;width:100%}.form-card[_ngcontent-%COMP%]{border-radius:1.5rem!important;border:none;box-shadow:0 4px 10px #0f172a0f;width:100%;max-width:960px}.form-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.75rem;padding-bottom:.5rem;border-bottom:1px solid #e5e7eb}.form-title[_ngcontent-%COMP%]{flex:1;text-align:center;font-size:.95rem;font-weight:600}.form-subtitle[_ngcontent-%COMP%]{font-size:.75rem;color:#6c757d;margin-top:.1rem}.btn-back[_ngcontent-%COMP%]{padding-inline:.4rem}.btn-search[_ngcontent-%COMP%]{padding-inline:.7rem}.form-label[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;color:#4b5563;margin-bottom:.25rem;display:block}input[pInputText][_ngcontent-%COMP%], .p-dropdown[_ngcontent-%COMP%]{font-size:.85rem}@media (max-width: 575.98px){.form-card[_ngcontent-%COMP%]{border-radius:1.2rem!important}.form-header[_ngcontent-%COMP%]{flex-direction:row;align-items:center}.form-title[_ngcontent-%COMP%]{font-size:.9rem}.form-subtitle[_ngcontent-%COMP%]{display:none}}.btn-back-modern[_ngcontent-%COMP%]{background:#f1f5f9!important;border:1px solid #d8dee9!important;color:#0d6efd!important;border-radius:1rem!important;padding:.35rem .9rem!important;font-size:.82rem!important;font-weight:500!important;display:flex;align-items:center;gap:.35rem}.btn-back-modern[_ngcontent-%COMP%]   .p-button-icon[_ngcontent-%COMP%]{font-size:.9rem;color:#0d6efd!important}.btn-back-modern[_ngcontent-%COMP%]:hover{background:#e3e9f2!important;border-color:#c8d0da!important}"]});let o=d;return o})();export{Ve as RegistrarPersonalComponent};
