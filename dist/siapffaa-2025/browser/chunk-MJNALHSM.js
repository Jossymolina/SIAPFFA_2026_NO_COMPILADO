import{a as Z,b as ee}from"./chunk-CLT3ZDBR.js";import"./chunk-W7TJHXMM.js";import"./chunk-M763EXIE.js";import{b as W,c as X}from"./chunk-MWNC3RUP.js";import{b as q,e as A,f as D,h as z,j as G,k as H,t as Y,x as J}from"./chunk-ZPMKEMCQ.js";import"./chunk-QE2BREUU.js";import{a as K,b as Q}from"./chunk-HDHPZNG5.js";import"./chunk-JPTHL2WT.js";import{ea as $}from"./chunk-VAG7FTYF.js";import{C as L,c as R,d as O,e as B,j as V,l as F,z as N}from"./chunk-FIATBDAH.js";import{Ca as a,Gb as E,Ib as k,Lb as i,Mb as c,Na as j,Nb as C,Sa as T,U as _,V as h,Ya as g,aa as y,cc as v,db as I,eb as w,ec as P,fc as M,ib as p,jb as e,kb as t,lb as u,mc as U,sb as S,wb as x,xb as m}from"./chunk-XJSKPFVT.js";import"./chunk-OXVY4BEJ.js";function ne(o,s){if(o&1){let n=S();e(0,"button",17),x("click",function(){let l=_(n).$implicit,d=m();return h(d.seleccionarCategoria(l))}),u(1,"i",18),e(2,"span"),i(3),t()()}if(o&2){let n=s.$implicit,r=m();k("active",r.categoria()===n),a(3),c(n)}}function ae(o,s){if(o&1&&(e(0,"div",34),i(1),t()),o&2){let n=m(2).$implicit;a(),c(n.descripcion)}}function re(o,s){if(o&1&&(e(0,"div",25)(1,"div",26),u(2,"i",27),t(),e(3,"div",28),i(4),t(),g(5,ae,2,1,"div",29),e(6,"div",30)(7,"span",31),u(8,"i",32),i(9),t(),u(10,"i",33),t()()),o&2){let n=m().$implicit;a(2),p("ngClass",n.icon),a(),p("title",n.titulo),a(),c(n.titulo),a(),p("ngIf",n.descripcion),a(4),C(" ",n.categoria," ")}}function oe(o,s){if(o&1){let n=S();e(0,"div",22)(1,"p-card",23),x("click",function(){let l=_(n).$implicit,d=m(2);return h(d.abrir(l))}),g(2,re,11,5,"ng-template",24),t()()}}function de(o,s){if(o&1&&(e(0,"div",19)(1,"div",20),g(2,oe,3,0,"div",21),t()()),o&2){let n=m();a(2),p("ngForOf",n.filtrados())}}function le(o,s){if(o&1&&(e(0,"tr")(1,"td"),i(2),t(),e(3,"td"),i(4),t(),e(5,"td",52),i(6),t()()),o&2){let n=s.$implicit,r=s.index;a(2),c(r+1),a(2),c(n.nombre_grado),a(2),C(" ",n.cantidad," ")}}function ce(o,s){o&1&&(e(0,"tr")(1,"td",53),i(2," No hay datos para mostrar "),t()())}function se(o,s){if(o&1&&(e(0,"tr")(1,"td"),i(2),t(),e(3,"td"),i(4),t(),e(5,"td"),i(6),t(),e(7,"td"),i(8),t(),e(9,"td"),i(10),t(),e(11,"td"),i(12),t(),e(13,"td"),i(14),v(15,"date"),t(),e(16,"td"),i(17),v(18,"date"),t(),e(19,"td"),i(20),v(21,"date"),t()()),o&2){let n=s.$implicit,r=s.index;a(2),c(r+1),a(2),c(n.identidad),a(2),c(n.grado),a(2),c(n.nombres),a(2),c(n.cuenta_banco),a(2),c(n.sexo),a(2),c(P(15,9,n.fecha_ingreso,"dd/MM/yyyy")),a(3),c(P(18,12,n.fecha_ascenso,"dd/MM/yyyy")),a(3),c(P(21,15,n.fecha_asignacion,"dd/MM/yyyy"))}}function pe(o,s){o&1&&(e(0,"tr")(1,"td",53),i(2," No hay datos para mostrar "),t()())}function me(o,s){if(o&1){let n=S();e(0,"div")(1,"div",35)(2,"div",36)(3,"div",37)(4,"h5",38),i(5,"Parte de su unidad"),t(),e(6,"small",39),i(7),t()(),e(8,"div",40)(9,"button",41),x("click",function(){_(n);let l=m();return h(l.exportarExcelResumen("tablaResumen"))}),u(10,"i",42),i(11," Exportar "),t()()(),e(12,"div",43)(13,"label",44),i(14),t(),e(15,"table",45)(16,"thead",46)(17,"tr")(18,"th",47),i(19,"#"),t(),e(20,"th"),i(21,"Grado"),t(),e(22,"th",48),i(23,"Cantidad"),t()()(),e(24,"tbody"),g(25,le,7,3,"tr",49)(26,ce,3,0,"tr",50),t()()()(),e(27,"div",35)(28,"div",36)(29,"div",40)(30,"button",41),x("click",function(){_(n);let l=m();return h(l.exportarExcelResumen("tablaList"))}),u(31,"i",42),i(32," Exportar "),t()()(),e(33,"div",43)(34,"table",51)(35,"thead",46)(36,"tr")(37,"th",47),i(38,"#"),t(),e(39,"th"),i(40,"Identidad"),t(),e(41,"th"),i(42,"Grado"),t(),e(43,"th"),i(44,"Nombres"),t(),e(45,"th"),i(46,"Cuenta Banco"),t(),e(47,"th"),i(48,"Sexo"),t(),e(49,"th"),i(50,"Fecha Ingreso"),t(),e(51,"th"),i(52,"Fecha Ascenso"),t(),e(53,"th"),i(54,"Fecha Asignaci\xF3n"),t()()(),e(55,"tbody"),g(56,se,22,18,"tr",49)(57,pe,3,0,"tr",50),t()()()()()}if(o&2){let n=m();a(7),c(n.usuarioLoguiado.unidad),a(7),C("Total ",n.sumarPropiedad(n.arregloResumenParteUnidad,"cantidad")),a(11),p("ngForOf",n.arregloResumenParteUnidad),a(),p("ngIf",(n.arregloResumenParteUnidad==null?null:n.arregloResumenParteUnidad.length)===0),a(30),p("ngForOf",n.arregloListaParteUnidad),a(),p("ngIf",(n.arregloListaParteUnidad==null?null:n.arregloListaParteUnidad.length)===0)}}function ue(o,s){if(o&1&&(e(0,"tr")(1,"td"),i(2),t(),e(3,"td"),i(4),t(),e(5,"td"),i(6),t(),e(7,"td"),i(8),t(),e(9,"td"),i(10),v(11,"date"),t(),e(12,"td"),i(13),v(14,"date"),t(),e(15,"td"),i(16),v(17,"date"),t(),e(18,"td"),i(19),t(),e(20,"td"),i(21),t(),e(22,"td"),i(23),t()()),o&2){let n=s.$implicit,r=s.index;a(2),c(r+1),a(2),c(n.identidad),a(2),c(n.nombres),a(2),c(n.grado),a(2),c(M(11,10,n.fecha,"dd/MM/yyyy","UTC-6")),a(3),c(M(14,14,n.fecha_de_baja,"dd/MM/yyyy","UTC-6")),a(3),c(M(17,18,n.fecha_sistema,"dd/MM/yyyy hh:mm:ss","UTC-6")),a(3),c(n.tipo_baja),a(2),c(n.asignacion),a(2),c(n.observacion)}}function xe(o,s){o&1&&(e(0,"tr")(1,"td",57),i(2," No hay datos para mostrar "),t()())}function ge(o,s){if(o&1){let n=S();e(0,"div")(1,"div",35)(2,"form",null,0)(4,"label",44),i(5,"Fecha "),u(6,"br")(7,"input",54,1),t(),e(9,"label",55)(10,"button",56),x("click",function(){_(n);let l=E(3),d=m();return h(d.sacarBajas(l))}),i(11,"Buscar"),t()()(),e(12,"div",36)(13,"div",37)(14,"h5",38),i(15,"Parte de bajas"),t(),e(16,"small",39),i(17),t()(),e(18,"div",40)(19,"button",41),x("click",function(){_(n);let l=m();return h(l.exportarExcelResumen("tablaResumen"))}),u(20,"i",42),i(21," Exportar "),t()()(),e(22,"div",43)(23,"label",44),i(24),t(),e(25,"table",45)(26,"thead",46)(27,"tr")(28,"th",47),i(29,"#"),t(),e(30,"th"),i(31,"Identidad"),t(),e(32,"th"),i(33,"Nombres"),t(),e(34,"th"),i(35,"Grado"),t(),e(36,"th"),i(37,"Fecha Ingreso"),t(),e(38,"th"),i(39,"Fecha Baja"),t(),e(40,"th"),i(41,"Fecha de Ejecucion"),t(),e(42,"th"),i(43,"Tipo Baja"),t(),e(44,"th"),i(45,"Unidad"),t(),e(46,"th"),i(47,"Observaci\xF3n"),t()()(),e(48,"tbody"),g(49,ue,24,22,"tr",49)(50,xe,3,0,"tr",50),t()()()()()}if(o&2){let n=E(3),r=m();a(10),p("disabled",!n.valid),a(7),c(r.usuarioLoguiado.unidad),a(7),C("Total ",r.arregloBajas.length),a(25),p("ngForOf",r.arregloBajas),a(),p("ngIf",(r.arregloBajas==null?null:r.arregloBajas.length)===0)}}function fe(o,s){if(o&1&&(e(0,"tr")(1,"td"),i(2),t(),e(3,"td"),i(4),t(),e(5,"td"),i(6),t(),e(7,"td"),i(8),t(),e(9,"td"),i(10),v(11,"date"),t(),e(12,"td"),i(13),v(14,"date"),t()()),o&2){let n=s.$implicit,r=s.index;a(2),c(r+1),a(2),c(n.identidad),a(2),c(n.nombre),a(2),c(n.nombre_grado),a(2),c(M(11,6,n.fecha_ingreso,"dd/MM/yyyy","UTC-6")),a(3),c(M(14,10,n.fecha_cambio_cat,"dd/MM/yyyy","UTC-6"))}}function _e(o,s){o&1&&(e(0,"tr")(1,"td",59),i(2," No hay datos para mostrar "),t()())}function he(o,s){if(o&1){let n=S();e(0,"div")(1,"div",35)(2,"form",null,0)(4,"label",44),i(5,"Fecha "),u(6,"br")(7,"input",54,1),t(),e(9,"label",55)(10,"button",56),x("click",function(){_(n);let l=E(3),d=m();return h(d.sacarCambioCategoria(l))}),i(11,"Buscar"),t()()(),e(12,"div",36)(13,"div",37)(14,"h5",38),i(15,"Parte de cambios de categoria"),t(),e(16,"small",39),i(17),t()(),e(18,"div",40)(19,"button",41),x("click",function(){_(n);let l=m();return h(l.exportarExcelResumen("tablaCambio"))}),u(20,"i",42),i(21," Exportar "),t()()(),e(22,"div",43)(23,"label",44),i(24),t(),e(25,"table",58)(26,"thead",46)(27,"tr")(28,"th",47),i(29,"#"),t(),e(30,"th"),i(31,"Identidad"),t(),e(32,"th"),i(33,"Nombres"),t(),e(34,"th"),i(35,"Grado"),t(),e(36,"th"),i(37,"Fecha Ingreso"),t(),e(38,"th"),i(39,"Fecha que Cambio"),t()()(),e(40,"tbody"),g(41,fe,15,14,"tr",49)(42,_e,3,0,"tr",50),t()()()()()}if(o&2){let n=E(3),r=m();a(10),p("disabled",!n.valid),a(7),c(r.usuarioLoguiado.unidad),a(7),C("Total ",r.arregloCambioCategoria.length),a(17),p("ngForOf",r.arregloCambioCategoria),a(),p("ngIf",(r.arregloCambioCategoria==null?null:r.arregloCambioCategoria.length)===0)}}var Be=(()=>{let s=class s{constructor(r,l){this._ServicioBackendService=r,this._ServiciosMensajeService=l,this.q=y(""),this.categoria=y("Todos"),this.reportes=y([{id:"r1",titulo:"Parte de la Unidad",descripcion:"Parte de toda la Unidad",icon:"pi pi-wallet",categoria:"Partes",ruta:"/reportes/planilla"},{id:"r2",titulo:"Parte de bajas",descripcion:"Aqui se muestran las bajas",icon:"pi pi-percentage",categoria:"Partes",ruta:"/reportes/isr"},{id:"r3",titulo:"Cambio de Categorias",descripcion:"Aqui estan las personas que cambiaron de categoria",icon:"pi pi-calendar",categoria:"RRHH",ruta:"/reportes/vacaciones"}]),this.categorias=U(()=>{let d=new Set(this.reportes().map(b=>b.categoria));return["Todos",...Array.from(d)]}),this.filtrados=U(()=>{let d=this.q().trim().toLowerCase(),b=this.categoria();return this.reportes().filter(f=>{let te=b==="Todos"||f.categoria===b,ie=!d||f.titulo.toLowerCase().includes(d)||(f.descripcion||"").toLowerCase().includes(d)||f.categoria.toLowerCase().includes(d);return te&&ie})}),this.arregloResumenParteUnidad=[],this.arregloListaParteUnidad=[],this.arregloBajas=[],this.arregloCambioCategoria=[]}ngOnInit(){this.usuarioLoguiado=JSON.parse(localStorage.getItem("user_login")).user}destruir(){this.arregloListaParteUnidad=[],this.arregloResumenParteUnidad=[],this.arregloBajas=[],this.arregloCambioCategoria=[],this.VentanaSeleccionada=null}abrir(r){this.destruir(),this.VentanaSeleccionada=r,r.id==="r1"&&this.sacarParteUnidad()}seleccionarCategoria(r){this.categoria.set(r),this.destruir()}limpiar(){this.q.set(""),this.categoria.set("Todos")}sacarParteUnidad(){let r={cadena:` and unidad.idunidad= ${this.usuarioLoguiado.idunidad} `};this._ServiciosMensajeService.show("Cargando parte de la unidad......"),this._ServicioBackendService.sacarParteMenuInicio(r).subscribe({next:l=>{if(this._ServiciosMensajeService.hide(),l.error)return this._ServiciosMensajeService.mensajeMalo(l.error);if(l.mensaje)return this._ServiciosMensajeService.mensajeMalo(l.mensaje);this.arregloResumenParteUnidad=l.resultado_resumen,this.arregloListaParteUnidad=l.resultado_lista},error:l=>{this._ServiciosMensajeService.hide(),this._ServiciosMensajeService.mensajeerrorServer()}})}sumarPropiedad(r,l){return Array.isArray(r)?r.reduce((d,b)=>{let f=Number(b[l]);return d+(isNaN(f)?0:f)},0):0}exportarExcelResumen(r){this._ServicioBackendService.exportexcel2(r,"siapffaa")}sacarBajas(r){let l={cadena:` and unidad.idunidad=${this.usuarioLoguiado.idunidad} and  year(fecha_de_baja)=year('${r.value.fecha}-1') 
                and month(fecha_de_baja)=month('${r.value.fecha}-1')  `};this.arregloBajas=[],this._ServiciosMensajeService.show(),this._ServicioBackendService.sacarBajasUnidad(l).subscribe({next:d=>{if(this._ServiciosMensajeService.hide(),d.error)return this._ServiciosMensajeService.mensajeMalo(d.error);this.arregloBajas=d.resultado},error:d=>{this._ServiciosMensajeService.hide(),this._ServiciosMensajeService.mensajeerrorServer()}})}sacarCambioCategoria(r){let l={cadena:`  and unidad.idunidad =${this.usuarioLoguiado.idunidad}
        and year(fechaPrimerIngreso)=year('${r.value.fecha}-1') and month(fechaPrimerIngreso)=month('${r.value.fecha}-1')`};this.arregloCambioCategoria=[],this._ServiciosMensajeService.show(),this._ServicioBackendService.sacarCambioCategoria(l).subscribe({next:d=>{if(this._ServiciosMensajeService.hide(),d.error)return this._ServiciosMensajeService.mensajeMalo(d.error);this.arregloCambioCategoria=d.resultado},error:d=>{this._ServiciosMensajeService.hide(),this._ServiciosMensajeService.mensajeerrorServer()}})}};s.\u0275fac=function(l){return new(l||s)(j(L),j(N))},s.\u0275cmp=T({type:s,selectors:[["app-menu-repo-unidad"]],decls:21,vars:6,consts:[["formBuscar","ngForm"],["fecha","ngModel"],[1,"shell"],[1,"topbar"],[1,"title-wrap"],[1,"dot"],[1,"title"],[1,"subtitle"],[1,"search"],[1,"p-input-icon-left","w-100"],["pInputText","","placeholder","Buscar reporte...",1,"w-100",2,"background-color","black",3,"ngModelChange","ngModel"],[1,"filters"],[1,"filters-scroll"],["type","button","class","chip",3,"active","click",4,"ngFor","ngForOf"],["type","button","pTooltip","Limpiar filtros",1,"btn-clear",3,"click"],[1,"pi","pi-times"],["class","container-fluid",4,"ngIf"],["type","button",1,"chip",3,"click"],[1,"pi","pi-tag"],[1,"container-fluid"],[1,"row","g-3"],["class","col-6 col-md-4 col-lg-3 col-xl-2",4,"ngFor","ngForOf"],[1,"col-6","col-md-4","col-lg-3","col-xl-2"],["styleClass","app-card",3,"click"],["pTemplate","content"],[1,"app"],[1,"icon-box"],[1,"pi","app-icon",3,"ngClass"],[1,"app-title",3,"title"],["class","app-desc",4,"ngIf"],[1,"app-footer"],[1,"cat"],[1,"pi","pi-folder"],[1,"pi","pi-angle-right","go"],[1,"app-desc"],[1,"container-fluid","py-3"],[1,"row","align-items-center","mb-3"],[1,"col"],[1,"mb-0"],[1,"text-muted"],[1,"col-auto"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"bi","bi-file-earmark-excel","me-1"],[1,"table-responsive"],["for",""],["id","tablaResumen",1,"table","table-bordered","table-hover","table-sm","align-middle"],[1,"table-light"],[2,"width","60px"],[1,"text-end",2,"width","120px"],[4,"ngFor","ngForOf"],[4,"ngIf"],["id","tablaList",1,"table","table-bordered","table-hover","table-sm","align-middle"],[1,"text-end","fw-bold"],["colspan","3",1,"text-center","text-muted","py-3"],["type","month","name","fecha","ngModel","","required","",1,"form-control"],["for","",2,"margin-left","10px"],[1,"btn","btn-sm","btn-primary",3,"click","disabled"],["colspan","10",1,"text-center","text-muted","py-3"],["id","tablaCambio",1,"table","table-bordered","table-hover","table-sm","align-middle"],["colspan","7",1,"text-center","text-muted","py-3"]],template:function(l,d){l&1&&(e(0,"div",2)(1,"div",3)(2,"div",4),u(3,"div",5),e(4,"div")(5,"div",6),i(6,"Reportes"),t(),e(7,"div",7),i(8,"Men\xFA para las unidades/bases"),t()()(),e(9,"div",8)(10,"span",9)(11,"input",10),x("ngModelChange",function(f){return d.q.set(f)}),t()()()(),e(12,"div",11)(13,"div",12),g(14,ne,4,3,"button",13),t(),e(15,"button",14),x("click",function(){return d.limpiar()}),u(16,"i",15),t()(),g(17,de,3,1,"div",16),I(18,me,58,6,"div"),I(19,ge,51,5,"div"),I(20,he,43,5,"div"),t()),l&2&&(a(11),p("ngModel",d.q()),a(3),p("ngForOf",d.categorias()),a(3),p("ngIf",!d.VentanaSeleccionada),a(),w((d.VentanaSeleccionada==null?null:d.VentanaSeleccionada.id)==="r1"?18:-1),a(),w((d.VentanaSeleccionada==null?null:d.VentanaSeleccionada.id)==="r2"?19:-1),a(),w((d.VentanaSeleccionada==null?null:d.VentanaSeleccionada.id)==="r3"?20:-1))},dependencies:[F,R,O,B,J,H,q,A,D,Y,G,z,Q,K,$,X,W,ee,Z,V],styles:["[_nghost-%COMP%]{display:block}.shell[_ngcontent-%COMP%]{min-height:100vh;padding:16px;background:#fcfcfc;color:#000103}.topbar[_ngcontent-%COMP%]{display:flex;gap:14px;align-items:center;justify-content:space-between;padding:14px 16px;border-radius:16px;background:#ffffff0f;border:1px solid rgba(255,255,255,.1);box-shadow:0 18px 50px #00000059;margin-bottom:12px}.title-wrap[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.dot[_ngcontent-%COMP%]{width:14px;height:14px;border-radius:50%;background:linear-gradient(135deg,#7c5cff,#00d2ff);box-shadow:0 0 0 6px #7c5cff26}.title[_ngcontent-%COMP%]{font-size:18px;font-weight:900}.subtitle[_ngcontent-%COMP%]{font-size:12px;opacity:.8}.search[_ngcontent-%COMP%]{width:min(520px,65vw)}[_nghost-%COMP%]     .p-inputtext{border-radius:14px;background:#ffffff0f;border:1px solid rgba(255,255,255,.1);color:#eaf0ff}[_nghost-%COMP%]     .p-inputtext::placeholder{color:#eaf0ffa6}.filters[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:10px;margin:10px 2px 16px}.filters-scroll[_ngcontent-%COMP%]{display:flex;gap:10px;overflow:auto;padding-bottom:4px}.chip[_ngcontent-%COMP%]{border:1px solid rgba(255,255,255,.1);background:#ffffff0d;color:#030303;border-radius:999px;padding:8px 12px;display:flex;gap:8px;align-items:center;white-space:nowrap;transition:transform .15s ease,background .15s ease,border-color .15s ease}.chip[_ngcontent-%COMP%]:hover{transform:translateY(-1px);background:#ffffff14}.chip.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#7c5cff4d,#00d2ff33);border-color:#7c5cff8c}.btn-clear[_ngcontent-%COMP%]{width:38px;height:38px;border-radius:12px;border:1px solid rgba(255,255,255,.1);background:#ffffff0f;color:#eaf0ff;display:flex;align-items:center;justify-content:center}.btn-clear[_ngcontent-%COMP%]:hover{background:#ffffff1a}[_nghost-%COMP%]     .app-card{border-radius:16px;overflow:hidden;cursor:pointer;background:#ffffff0f;border:1px solid rgba(255,255,255,.1);box-shadow:0 18px 50px #00000059;transition:transform .18s ease,box-shadow .18s ease,border-color .18s ease}[_nghost-%COMP%]     .app-card .p-card-body{padding:14px}[_nghost-%COMP%]     .app-card:hover{transform:translateY(-4px);border-color:#7c5cff66;box-shadow:0 26px 70px #00000073}.app[_ngcontent-%COMP%]{min-height:145px}.icon-box[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:16px;background:linear-gradient(135deg,#7c5cff4d,#00d2ff2e);border:1px solid rgba(255,255,255,.12);display:flex;align-items:center;justify-content:center;box-shadow:0 14px 40px #00000040}.app-icon[_ngcontent-%COMP%]{font-size:26px}.app-title[_ngcontent-%COMP%]{margin-top:12px;font-size:14px;font-weight:900;line-height:1.1}.app-desc[_ngcontent-%COMP%]{margin-top:6px;font-size:12px;opacity:.78;min-height:28px}.app-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:12px}.cat[_ngcontent-%COMP%]{display:inline-flex;gap:8px;align-items:center;font-size:11px;padding:6px 10px;border-radius:999px;background:#ffffff0d;border:1px solid rgba(255,255,255,.1)}.go[_ngcontent-%COMP%]{opacity:.65}"]});let o=s;return o})();export{Be as MenuRepoUnidadComponent};
