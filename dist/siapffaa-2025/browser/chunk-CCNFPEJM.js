import{b as se}from"./chunk-AWVXNJFH.js";import"./chunk-5OX6GXQO.js";import"./chunk-GIJM4SEB.js";import"./chunk-CLT3ZDBR.js";import{a as ie}from"./chunk-CNAZPYPR.js";import"./chunk-CYBTF2RE.js";import"./chunk-W7TJHXMM.js";import"./chunk-EQMPRG6V.js";import"./chunk-36JN3LZY.js";import"./chunk-M763EXIE.js";import"./chunk-MWNC3RUP.js";import{b as X,c as u,e as Q,f as Y,g as w,h as J,i as m,j as Z,k as K,l as $,s as R,t as ee,x as re,y as ae}from"./chunk-ZPMKEMCQ.js";import"./chunk-QE2BREUU.js";import"./chunk-JPTHL2WT.js";import"./chunk-VAG7FTYF.js";import{C as V,t as q,v as W,y as oe,z as H}from"./chunk-FIATBDAH.js";import{Ca as c,Gb as L,Jb as M,Lb as l,Mb as P,Na as N,Nb as F,Qb as g,Rb as j,Sa as U,Sb as D,U as h,V as p,Wb as x,Ya as B,db as k,eb as G,gb as T,hb as z,ib as f,jb as o,kb as n,lb as E,sb as O,wb as _,xb as A}from"./chunk-XJSKPFVT.js";import{f as te,g as I}from"./chunk-OXVY4BEJ.js";var d=te(oe());var ne=()=>({width:"900px",maxHeight:"80vh"}),le=()=>({width:"800px",maxHeight:"80vh"}),de=()=>({width:"420px"}),ce=(b,v)=>v.idNombramiento,ue=(b,v)=>v.idPuesto;function me(b,v){if(b&1){let S=O();o(0,"tr")(1,"th",60),l(2),n(),o(3,"td",61),l(4),n(),o(5,"td"),l(6),n(),o(7,"td",62)(8,"button",63),_("click",function(){let a=h(S).$implicit,r=A();return r.sacarPuestos_delNombramiento(a.idNombramiento),p(r.mostrarModalPuesto=!0)}),E(9,"i",64),l(10," Puestos "),n(),o(11,"button",65),_("click",function(){let a=h(S).$implicit,r=A();return p(r.eliminarNombramiento(a.idNombramiento))}),E(12,"i",66),l(13," Eliminar "),n()()()}if(b&2){let S=v.$implicit,e=v.$index;c(2),P(e+1),c(2),P(S.descripcion),c(2),P(S.orden)}}function he(b,v){if(b&1){let S=O();o(0,"div",67)(1,"button",68),_("click",function(){h(S);let a=A();return p(a.mostrarModalDireccion=!1)}),n()()}}function pe(b,v){if(b&1){let S=O();o(0,"tr")(1,"td"),l(2),n(),o(3,"td",61),l(4),n(),o(5,"td"),l(6),n(),o(7,"td",69)(8,"button",70),_("click",function(){let a=h(S).$implicit,r=A();return p(r.eliminarPuesto(a.idPuesto))}),E(9,"i",66),n(),o(10,"button",71),_("click",function(){let a=h(S).$implicit,r=A();return r.puestoseleccionado(a),p(r.mostrarCambioNombrePuesto=!0)}),E(11,"i",72),n()()()}if(b&2){let S=v.$implicit,e=v.$index;c(2),P(e+1),c(2),P(S.Nombre_Puesto),c(2),P(S.dependenciaArbol)}}function ve(b,v){b&1&&(o(0,"tr")(1,"td",73),E(2,"i",74),l(3," No hay puestos registrados "),n()())}function be(b,v){if(b&1){let S=O();o(0,"div",67)(1,"button",68),_("click",function(){h(S);let a=A();return p(a.mostrarModalPuesto=!1)}),n()()}}var Ae=(()=>{let v=class v{get identidad(){return this.formularioAresto.get("identidad")}get identidadAcusador(){return this.formularioAresto.get("identidadAcusador")}get fecha(){return this.formularioAresto.get("fecha")}get motivo(){return this.formularioAresto.get("motivo")}get hora(){return this.formularioAresto.get("hora")}get numeroTelefono(){return this.telefono.get("numeroTelefono")}get identidad2(){return this.formIdentidad.get("identidad")}get cuenta(){return this.cambionumeroCuenta.get("cuenta")}get numero(){return this.cupos.get("numero")}get nombre1(){return this.formulariopariente.get("nombre")}get apellidos1(){return this.formulariopariente.get("apellidos")}get correo1(){return this.formulariopariente.get("correo")}get tipo_sangre1(){return this.formulariopariente.get("tipo_sangre")}get fecha_nacimiento1(){return this.formulariopariente.get("fecha_nacimiento")}get lugar_nacimiento1(){return this.formulariopariente.get("lugar_nacimiento")}get estado_civil1(){return this.formulariopariente.get("estado_civil")}get combatiente1(){return this.formulariopariente.get("combatiente")}get identidad1(){return this.formulariopariente.get("identidad1")}get nivel_educativo1(){return this.formulariopariente.get("nivel_educativo")}get religion1(){return this.formulariopariente.get("religion")}get direccion_exacta1(){return this.formulariopariente.get("direccion_exacta")}get genero(){return this.formulariopariente.get("genero")}constructor(e,a,r,i){this._Activatedroute=e,this._DatospersonalesService=a,this._Router=r,this._ServiciosMensajeService=i,this.esperar=!1,this.agregarNuevoCupo={cantidadAutorizada:0,combatiente:"",idcategoria:"",fechaIngreso:""},this.desplegar=0,this.arregloCupos=new Array,this.banderapariente=0,this.noesvalido=!1,this.arreglosDeMisAsignacionesDirecciones=new Array,this.verCarpeta=0,this.arregloDepartamento=new Array,this.arreglocarpetasegunda=new Array,this.banderaEspiner=0,this.imgURL="",this.arreglocarpetaprincipal=new Array,this.arreglosSeccion=new Array,this.arreglodeDocumentos=new Array,this.arreglosRam=new Array,this.arregloFuerzas=new Array,this.ArregloUnidades=new Array,this.ArregloNombramiento=new Array,this.ArregloPuestos=new Array,this.FilesToUploads=new Array,this.arregloEducacionCivil=new Array,this.arregloarmas=new Array,this.arregloPaises=new Array,this.arregloConyugue=new Array,this.arregloMisPaises=new Array,this.arregloMisIdiomas=new Array,this.arregloIdiomas=new Array,this.arregloTelefono=new Array,this.arregloPadres=new Array,this.arregloHijos=new Array,this.arregloGrados=new Array,this.arregloAscensos=new Array,this.arreglomunicipio=new Array,this.arregloAsignaciones=new Array,this.arregloArestos=new Array,this.arregloCategorias=new Array,this.data={nombramiento:"",orden:""},this.dataPuesto={Nombre_Puesto:"",orden:""},this.idiomaSelected={idmisidiomas:"",nivel:0,idpersonal:""},this.consulta={identidad:""},this.banderadeCarga=0,this.numerocuentaAcambiar="",this.lineaAsecenso={personal_idpersonal:"",banderaPrimerIgreso:"",categoria_idcategoria:"",ejecutado_por:"",fecha:"",FechaPrimerIngreso:"",grado:"",numeroAcuerdo:"",activo:"",idunidad:"",idfuerza:""},this.identidadregex=/^[0-9]*$/,this.nmumeroregex=/[9|8|3|2]{1}\d{3}[-]\d{4}/,this.solo_numero=/\d+$/,this.patronCorreo=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,this.formularioAresto=new w({identidad:new m(""),identidadAcusador:new m("",[u.required,u.pattern(this.identidadregex)]),fecha:new m("",[u.required]),motivo:new m("",[u.required]),hora:new m("",[u.required])}),this.telefono=new w({numeroTelefono:new m("",[u.required,u.pattern(this.nmumeroregex)])}),this.formIdentidad=new w({identidad:new m("",[u.required,u.pattern(this.identidadregex)])}),this.cambionumeroCuenta=new w({cuenta:new m("",[u.required,u.pattern(this.solo_numero)])}),this.cupos=new w({numero:new m("",[u.required,u.pattern(this.solo_numero)])}),this.formulariopariente=new w({nombre:new m("",[u.required]),apellidos:new m("",[u.required]),correo:new m("",[u.required,u.pattern(this.patronCorreo)]),tipo_sangre:new m("",[u.required]),fecha_nacimiento:new m("",[u.required]),lugar_nacimiento:new m("",[u.required]),estado_civil:new m("",[u.required]),combatiente:new m(""),identidad1:new m(""),nivel_educativo:new m("",[u.required]),religion:new m("",[u.required]),direccion_exacta:new m("",[u.required]),genero:new m("",[u.required])}),this.arregloControlGrados=new Array,this.arreglounidadEjecutora=[],this._Activatedroute.params.subscribe(s=>{this.desplegar=parseInt(s.id),this.SegundaVentana=0})}ngOnInit(){this.sacarFuerza(),this.sacarcontrolGrados(),this.sacarIdiomas(),this.usuarioLoguiado=JSON.parse(localStorage.getItem("user_login")).user,this._DatospersonalesService.sacardepartamentoTodos().subscribe(e=>{this.arregloDepartamento=e.resultado}),this.sacarUnidadEjecutora()}sacarUnidadEjecutora(){this._DatospersonalesService.sacarUnidadEjecutora().subscribe({next:e=>{this.arreglounidadEjecutora=e.resultado},error:()=>{}})}limpiarArreglos(){this.agregarNuevoCupo={cantidadAutorizada:0,combatiente:"",idcategoria:"",fechaIngreso:""},this.sacarcontrolGrados()}sacarcontrolGrados(){var e;this.arregloControlGrados=new Array,this.arreglosRam=new Array,this._DatospersonalesService.sacarControlGrados(e).subscribe(a=>{a.error?this._DatospersonalesService.mensajeError(a.error):a.mensaje?this._DatospersonalesService.mensajeError(a.mensaje):this.arregloControlGrados=a.resultado},a=>{this._DatospersonalesService.mensajeError("ERROR DE CONEXION")})}actualizarCuenta(){if(!this.cambionumeroCuenta.valid)this._DatospersonalesService.mensajeError("ERROR | SOLO NUMEROS SON ACEPTADOS EN EL NUMERO DE CUENTA");else{var e={updtate:this.cambionumeroCuenta.value.cuenta,identidad:this.objetoConsultado.identidad,cuentaVieja:this.objetoConsultado?.cuenta_banco,usuario:this.usuarioLoguiado};this._DatospersonalesService.actualizarCuentaBanco(e).subscribe(a=>{a.error?this._DatospersonalesService.mensajeError(a.error):(this._DatospersonalesService.mensajeBueno(a.resultado),this.cambionumeroCuenta.reset(),this.buscarporIdentidad())})}}sacarmunicipio(){var e={iddepartamento:this.departamentoselected.iddepartamento,prueba:"pruena"};this._DatospersonalesService.sacarmunicipio(e).subscribe(a=>{this.arreglomunicipio=a.resultado})}makeFileReques(e,a,r){return new Promise((i,s)=>{var t=new FormData,C=new XMLHttpRequest;if(r===void 0)this._DatospersonalesService.mensajeError("SELECCIONE EL ARCHIVO");else{for(let y=0;y<r.length;y++)t.append("files",r[y],r[y].name);C.onreadystatechange=function(){C.readyState==4&&(C.status==200?i(JSON.parse(C.response)):s(C.response))},C.open("POST",e,!0),C.send(t)}})}guardarImagen(){this.makeFileReques(this._DatospersonalesService.url2+"subirArchivo/"+this.objetoConsultado.identidad,[],this.FilesToUploads).then(e=>{this.imgURL="",e.error?this._DatospersonalesService.mensajeError(e.error):e.mesaje?this._DatospersonalesService.mensajeError(e.mensaje):(this._DatospersonalesService.mensajeBueno(e.resultado),this.buscarporIdentidad())})}verificarImagen(){if(this.banderadeCarga=1,this.objetoConsultado.foto==="null"||this.objetoConsultado.foto===null||this.objetoConsultado.foto==="Ninguna")this.guardarImagen(),this.banderadeCarga=0;else{var e={archivo:this.objetoConsultado.foto};this._DatospersonalesService.eliminararchivo(e).subscribe(a=>{a.mensaje?(this._DatospersonalesService.mensajeError(a.mensaje),this.guardarImagen(),this.banderadeCarga=0):(this.banderadeCarga=0,this.guardarImagen())})}}fileChangeEvenet(e){this.FilesToUploads=e.target.files}preview(e,a){if(this.fileChangeEvenet(a),e.length!==0){var r=e[0].type;if(r.match(/image\/*/)!=null){var i=new FileReader;i.readAsDataURL(e[0]),i.onload=s=>{this.imgURL=i.result}}}}guardarmunicipio(){if(this.municipioSelected===void 0)this._DatospersonalesService.mensajeError("SELECCIONE EL MUNICIPIO");else{var e={identidad:this.objetoConsultado.identidad,idmunicipio:this.municipioSelected.idmunicipio};this._DatospersonalesService.ActualizarlugarNacimiento(e).subscribe(a=>{a.error?this._DatospersonalesService.mensajeError(a.error):(this._DatospersonalesService.mensajeBueno(a.resultado),this.buscarporIdentidad())})}}sacarFuerza(){this.arregloFuerzas=new Array,this._DatospersonalesService.sacarFuerza().subscribe(e=>{this.arregloFuerzas=e.resultado})}sacarunidades(){this.ArregloUnidades=[],this._ServiciosMensajeService.show(),this._DatospersonalesService.sacarunidad(this.fuerzaSelected).subscribe({next:e=>{this._ServiciosMensajeService.hide(),this.ArregloUnidades=e.resultado},error:()=>{this._ServiciosMensajeService.hide(),this._ServiciosMensajeService.mensajeMalo("ERROR DE CONECCION AL SACAR UNIDADES")}})}sacarNombranmiento(){this.ArregloNombramiento=[];var e={idunidad:this.unidadSelected.idunidad};this._ServiciosMensajeService.show(),this._DatospersonalesService.mostrarNombramiento(e).subscribe({next:a=>{console.log(a),this._ServiciosMensajeService.hide(),this.ArregloNombramiento=a.resultado},error:()=>{this._ServiciosMensajeService.hide(),this._DatospersonalesService.mensajeError("Ocurrio un error en la peticion")}})}Sacar_Direcciones(e){this.ArregloNombramiento=new Array,this.unidadSelected=e.unidad;var a={idunidad:e.idunidad};this._DatospersonalesService.mostrarNombramiento(a).subscribe(r=>{this.ArregloNombramiento=r.resultado,this.sacarDireccionDeAsignado()},r=>{this._DatospersonalesService.mensajeError("Ocurrio un error en la peticion")})}sacarPuestos_delNombramiento(e){this.ArregloPuestos=new Array;var a={idnombramiento:e};this.nombramientoSelected=e,this._DatospersonalesService.MostrarPuesto(a).subscribe(r=>{this.ArregloPuestos=r.resultado},r=>{this._DatospersonalesService.mensajeError("Error de Coneccion llame a Soporte Tecnico")})}guardar_Nombramiento(){if(this.data.orden===""||this.data.nombramiento==="")this._DatospersonalesService.mensajeError("RELLENE LOS CAMPOS");else{var e={idunidad:this.unidadSelected.idunidad,descripcion:this.data.nombramiento,orden:this.data.orden};this._DatospersonalesService.agregarNombramiento(e).subscribe(a=>{a.error?this._DatospersonalesService.mensajeError(a.error):(this._DatospersonalesService.mensajeBueno(a.resultado),this.data={nombramiento:"",orden:""},this.sacarNombranmiento())},a=>{this._DatospersonalesService.mensajeError("ERROR DE CONEXION | GUARDAR NOMBRAMIENTO")})}}guardarPuesto(){let e=(this.dataPuesto?.Nombre_Puesto||"").trim(),a=this.dataPuesto?.orden,r=this.nombramientoSelected;if(!r){this._DatospersonalesService.mensajeError("Debe seleccionar un nombramiento antes de agregar un puesto.");return}if(!e){this._DatospersonalesService.mensajeError("El nombre del puesto es obligatorio.");return}let i=Number(a);if(!Number.isFinite(i)||i<0){this._DatospersonalesService.mensajeError("El orden jer\xE1rquico debe ser un n\xFAmero v\xE1lido (0 o mayor).");return}let s={Nombre_Puesto:e,dependenciaArbol:i,idnombramiento:r};this._ServiciosMensajeService.show(),this._DatospersonalesService.agregarPuesto(s).subscribe({next:t=>{if(this._ServiciosMensajeService.hide(),!t){this._DatospersonalesService.mensajeError("Respuesta vac\xEDa del servidor al guardar el puesto.");return}if(t.error){this._DatospersonalesService.mensajeError(t.error);return}this._DatospersonalesService.mensajeBueno(t.resultado||"Puesto guardado correctamente."),this.dataPuesto={Nombre_Puesto:"",orden:""},this.sacarPuestos_delNombramiento(this.nombramientoSelected)},error:t=>{console.error("ERROR DE CONEXION | GUARDAR PUESTO",t),this._ServiciosMensajeService.hide(),this._DatospersonalesService.mensajeError("ERROR DE CONEXI\xD3N | GUARDAR PUESTO")}})}crearCarpetaSegundaria(){d.default.fire({title:"Control de Carpetas",text:"Ingrese el nombre de la Carpeta",input:"text",showCancelButton:!1,allowOutsideClick:!1}).then(e=>{if(e===null)this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e.value==="")this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e.value===void 0)this._DatospersonalesService.mensajeError("Rellene los Campos");else{var a={idcarpeta:this.idcarpetaPrincipal,nombre:e.value};this._DatospersonalesService.crearcarpetaSegundaria(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):this.buscarSegundacarpeta(this.idcarpetaPrincipal)})}})}eliminarcarpetasegundaria(e){var a={idcarpeta:e};this._DatospersonalesService.deletecarpetaSegundaria(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError("La Carpeta Contien Documentos"):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):(this._DatospersonalesService.mensajeBueno(r.resultado),this.buscarSegundacarpeta(this.idcarpetaPrincipal))})}AtrasDocumentos(e){this.verCarpeta=e}eliminarcarpetaprimaria(e){var a={idcarpeta:e};this._DatospersonalesService.deletecarpetaPrimaria(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError("La Carpeta Contien Archivos"):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):(this._DatospersonalesService.mensajeBueno(r.resultado),this.archivoPrincipal())})}ver(e){this.idarrestoSelected=e.idarrestos}resolveAfter2Seconds(){return new Promise(e=>{this.arregloAsignaciones=new Array;var a={identidad:this.consulta.identidad},r;this._DatospersonalesService.sacarLasAsignacionesDeunaPersona(a).subscribe(i=>{i.error||i.mensaje?e("error"):i.resultado.forEach(s=>{parseInt(s.actual)===1&&(r=s.idunidad,e(r))})})})}buscarSegundacarpeta(e){this.idcarpetaPrincipal=e;var a={idcarpetaprincipal:e};this.arreglocarpetasegunda=new Array,this._DatospersonalesService.sacarcarpetaSegundaria(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?(this._DatospersonalesService.mensajeError(r.mensaje),this.verCarpeta=1):(this.arreglocarpetasegunda=r.resultado,this.verCarpeta=1)})}crearCarpetaPrincipal(){d.default.fire({title:"Control de Carpetas",text:"Ingrese el nombre de la Carpeta",input:"text",showCancelButton:!1,allowOutsideClick:!1}).then(e=>{if(e===null)this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e.value==="")this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e.value===void 0)this._DatospersonalesService.mensajeError("Rellene los Campos");else{var a={identidad:this.objetoConsultado.identidad,nombre:e.value};this._DatospersonalesService.crearcarpetaPrincipal(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):this.archivoPrincipal()})}})}deleteDocumentoArresto(e,a){this.banderaEspiner=1;var r={idarrestos:e,dir:a};this._DatospersonalesService.deleteDocumentoArrestos(r).subscribe(i=>{i.error?(this._DatospersonalesService.mensajeError(i.error),this.banderaEspiner=0):i.mensaje?(this._DatospersonalesService.mensajeError(i.mensaje),this.banderaEspiner=0):(d.default.fire("Eliminado con exito"),this.banderaEspiner=0,this.sacarArestosdelPersonal())})}sacarDirecionesNombramiento(){this.sacarasignaciondireccionActual(),this.asyncCall()}asyncCall(){return I(this,null,function*(){this.arreglosSeccion=new Array;let e=yield this.resolveAfter2Seconds();if(e==="error")this._DatospersonalesService.mensajeError("Esta persona no cuenta con asignaciones");else{var a={idunidad:e};this._DatospersonalesService.mostrarNombramiento(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):this.arreglosSeccion=r.resultado})}})}sacarpuestos(e){this.arregloPuestos=new Array;var a={idnombramiento:this.seccionselected.idNombramiento};this._DatospersonalesService.MostrarPuesto(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):this.arregloPuestos=r.resultado})}desactivrPuesto(){var e={identidad:this.objetoConsultado.identidad};d.default.fire({title:"\xBFAlto?",text:"Esta seguro de desactivar el puesto",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#f0afa6",cancelButtonText:"Cancelar",confirmButtonText:"Aceptar"}).then(a=>{a.isConfirmed&&this._DatospersonalesService.desactivarPuesto(e).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):(this._DatospersonalesService.mensajeBueno(r.resultado),this.sacsarcargodelapersona())})})}eliminarPuesto(e){var a={idPuesto:e};this._DatospersonalesService.eliminarPuesto(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):(this._DatospersonalesService.mensajeBueno(r.resultado),this.sacarPuestos_delNombramiento(this.nombramientoSelected))},r=>{this._DatospersonalesService.mensajeError("ERROR DE CONECCION | ELIMIAR PUESTO")})}eliminarHijos(e){var a={identidad:e.identidad};this._DatospersonalesService.deleteHijo(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):(this._DatospersonalesService.mensajeBueno("Eliminado con Exito"),this.sacarpadres())})}eliminar(e,a,r){this.banderaEspiner=1;var i={iddocumento:e,dir:a,identidad:this.objetoConsultado.identidad,identidadEjecutora:this.usuarioLoguiado.identidad,nombreDocumento:r.nombreDocumento};this._DatospersonalesService.deleteDocumento(i).subscribe(s=>{s.error?(this._DatospersonalesService.mensajeError(s.error),this.banderaEspiner=0):s.mensaje?(this._DatospersonalesService.mensajeError(s.mensaje),this.banderaEspiner=0):(d.default.fire("Eliminado con exito"),this.banderaEspiner=0,this.buscardocumentos(this.idcarpetaSegundaria))})}buscardocumentos(e){this.idcarpetaSegundaria=e,this.arreglodeDocumentos=new Array;var a={idcarpetaSegundaria:e};this._DatospersonalesService.sacarDocumento(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?(this._DatospersonalesService.mensajeError(r.mensaje),this.verCarpeta=2):(this.verCarpeta=2,this.arreglodeDocumentos=r.resultado)})}eliminarPadre(e){var a={identidad:e.identidad};this._DatospersonalesService.deletePadres(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):(this._DatospersonalesService.mensajeBueno("Eliminado con Exito"),this.sacarpadres())})}limpiarBandera(){this.banderapariente=0,this.formulariopariente.reset(),this.formIdentidad.reset()}eliminarNombramiento(e){var a={idNombramiento:e};this._DatospersonalesService.eliminarNombramiento(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):(this._DatospersonalesService.mensajeBueno(r.resultado),this.sacarNombranmiento())},r=>{this._DatospersonalesService.mensajeError("ERROR DE CONECCION | ELIMIAR PUESTO")})}buscarporIdentidad(){this._DatospersonalesService.consultaPorIdentidad(this.consulta).subscribe(e=>{e.error?this._DatospersonalesService.mensajeError(e.error.sqlMessage+"BUSC"):e.mensaje?this._DatospersonalesService.mensajeError(e.mensaje):(this.objetoConsultado=e.resultado[0],this.armaobjetoConsultado=e.arma[0],this.desplegar=0,this.SegundaVentana=1)})}atras(e){this.SegundaVentana=0,this.desplegar=e}archivoPrincipal(){this.verCarpeta=0,this.arreglocarpetaprincipal=new Array;var e={identidad:this.objetoConsultado.identidad};this._DatospersonalesService.sacarcarpetaPrimaria(e).subscribe(a=>{a.error?this._DatospersonalesService.mensajeError(a.error):a.mensaje?this._DatospersonalesService.mensajeError(a.mensaje):this.arreglocarpetaprincipal=a.resultado})}ActualizaGenero(){d.default.fire({title:"Control Genero",text:"Seleccione el Genero",input:"select",inputOptions:{M:"Masculino",F:"Femenino"},showCancelButton:!0,allowOutsideClick:!1}).then(e=>{if(e===null)this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e.value==="")this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e===void 0)this._DatospersonalesService.mensajeError("Rellene los Campos");else{var a={identidad:this.objetoConsultado.identidad,sexo:e.value};this._DatospersonalesService.actualizarGenero(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):(this._DatospersonalesService.mensajeError(r.resultado),this.buscarporIdentidad())})}})}sacarArestosdelPersonal(){var e={identidad:this.consulta.identidad};this.arregloArestos=new Array,this._DatospersonalesService.sacarAresto(e).subscribe(a=>{a.error?this._DatospersonalesService.mensajeError(a.error.sqlMessage):a.mensaje?this._DatospersonalesService.mensajeError(a.mensaje):this.arregloArestos=a.resultado})}sacsarcargodelapersona(){this.arreglosRam=new Array;var e={identidad:this.objetoConsultado.identidad};this._DatospersonalesService.sacarCargoDeUnapersona(e).subscribe(a=>{a.error?this._DatospersonalesService.mensajeError(a.error):a.mensaje?this._DatospersonalesService.mensajeError(a.mensaje):this.arreglosRam=a.resultado},a=>{this._DatospersonalesService.mensajeError("ERROR DE CONECCION AL RELIZAR LA CONSULTA POR CARGO")})}sacarAsignacionesPersonal(){this.arregloAsignaciones=new Array;var e={identidad:this.consulta.identidad};this._DatospersonalesService.sacarLasAsignacionesDeunaPersona(e).subscribe(a=>{a.error?this._DatospersonalesService.mensajeError(a.error.sqlMessage):a.mensaje?this._DatospersonalesService.mensajeError(a.mensaje):this.arregloAsignaciones=a.resultado})}sacarAscensosdelPersonal(){var e={identidad:this.consulta.identidad};this._DatospersonalesService.sacarAscensosporPersona(e).subscribe(a=>{this.arregloAscensos=a.resultado,this.arregloAscensos.forEach(r=>{r.activo==1&&(this.gradoActualdelConsultado=r)})})}sacarmisidiomas(){this.arregloMisIdiomas=new Array;var e={identidad:this.objetoConsultado.identidad};this._DatospersonalesService.consultaIdiomasPersonal(e).subscribe(a=>{a.error?this._DatospersonalesService.mensajeError(a.error):a.mensaje?this._DatospersonalesService.mensajeError(a.mensaje):this.arregloMisIdiomas=a.resultado})}sacarMisPaises(){this.arregloMisPaises=new Array;var e={identidad:this.objetoConsultado.identidad};this._DatospersonalesService.consultaPaisesDelPersonal(e).subscribe(a=>{a.error?this._DatospersonalesService.mensajeError(a.error):a.mensaje?this._DatospersonalesService.mensajeError(a.mensaje):this.arregloMisPaises=a.resultado}),this.sacarmisidiomas()}consultaTelefonoDelPersonal(){var e={identidad:this.consulta.identidad};this.arregloTelefono=new Array,this._DatospersonalesService.consultaTelefonoPersonal(e).subscribe(a=>{a.mensaje?this._DatospersonalesService.mensajeError(a.mensaje):this.arregloTelefono=a.resultado})}consultaHijosDelPersonal(){var e={identidad:this.consulta.identidad};this._DatospersonalesService.consultaHijosPersonal(e).subscribe(a=>{a.mensaje?this._DatospersonalesService.mensajeError(a.mensaje):this.arregloHijos=a.resultado})}consultaPadresoDelPersonal(){var e={identidad:this.consulta.identidad};this._DatospersonalesService.consultaPadresPersonal(e).subscribe(a=>{a.mensaje?this._DatospersonalesService.mensajeError(a.mensaje):this.arregloPadres=a.resultado,this.consultaHijosDelPersonal()}),this.sacarconyugue()}eliminarnumero(e){var a={numero:e};this._DatospersonalesService.eleminarnumeroTelefono(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):(this._DatospersonalesService.mensajeBueno(r.resultado),this.consultaTelefonoDelPersonal())})}ascender(){var e={autorizado:1},a={servicio:"",general:""};this.gradoActualdelConsultado.nivel===1?(alert("Es Un soldado o un auxiliar"),this.banderacambiocategoria=2):this.gradoActualdelConsultado.nivel===2?(alert("Es Un Estudiante"),this.banderacambiocategoria=1):this.gradoActualdelConsultado.nivel===3?(this.banderacambiocategoria=1,this.objetoConsultado.idfuerza===3?(alert("Es Un cadete del ejercito"),a.servicio="EHOS",a.general="EHO"):this.objetoConsultado.idfuerza===4?(alert("Es Un cadete de la aerea "),a.servicio="FAHOS",a.general="FAHO"):(alert("Es Un cadete de la Naval "),a.servicio="FNHOS",a.general="FNHO")):this.banderacambiocategoria=2,this._DatospersonalesService.sacarCategoria(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):this.arregloCategorias=r.resultado}),this._DatospersonalesService.sacarGrados(e).subscribe(r=>{this.arregloGrados=r.resultado})}eliminarIdioma(e){var a={identidad:this.objetoConsultado.identidad,idioma:e.idmisidiomas,nivel:e.nivel};this._DatospersonalesService.deleteidomas(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):(this._DatospersonalesService.mensajeBueno("Eliminado con Exito"),this.sacarmisidiomas())})}sacarIdiomas(){this.arregloIdiomas=new Array,this._DatospersonalesService.sacaridiomas().subscribe(e=>{e.error?this._DatospersonalesService.mensajeError(e.error):this.arregloIdiomas=e.resultado})}EliminarPais(e){var a={identidad:this.objetoConsultado.identidad,idpais:e.idpais};this._DatospersonalesService.deletepais(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):(this._DatospersonalesService.mensajeBueno(r.resultado),this.sacarMisPaises())})}sacarpaises(){this._DatospersonalesService.sacarpaises().subscribe(e=>{e.error?this._DatospersonalesService.mensajeError(e.error):e.mensaje?this._DatospersonalesService.mensajeError(e.mensaje):this.arregloPaises=e.resultado})}Actualizaserie(){d.default.fire({title:"Control del Sistema",text:"Numero de Serie",input:"text",showCancelButton:!0,allowOutsideClick:!1}).then(e=>{if(e===null)this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e.value==="")this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e===void 0)this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e.isDismissed)this._DatospersonalesService.mensajeError("Cancelado");else{var a=/^[0-9]+$/;if(e.value.match(a)){var r={identidad:this.objetoConsultado.identidad,serie:e.value};this._DatospersonalesService.actualizarSerie(r).subscribe(i=>{i.error?this._DatospersonalesService.mensajeError(i.error):i.resultado&&(this._DatospersonalesService.mensajeBueno(i.resultado),this.buscarporIdentidad())})}else this._DatospersonalesService.mensajeError("Ingrese solo N\xFAmeros")}})}ActualizarEstadoCivil(){d.default.fire({title:"Control del Sistema",text:"Seleccione su estado Civil",input:"select",inputOptions:{"Soltero(a)":"Soltero(a)","Casado(a)":"Casado(a)","Viudo(a)":"Viudo(a)","Divorciado(a)":"Divorciado(a)","Union libre":" Union libre"},showCancelButton:!0,allowOutsideClick:!1}).then(e=>{if(e===null)this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e.value==="")this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e===void 0)this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e.isDismissed)this._DatospersonalesService.mensajeError("Cancelado");else{var a={updtate:e.value,identidad:this.objetoConsultado.identidad};this._DatospersonalesService.actualizarestadoCivil(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):(this._DatospersonalesService.mensajeBueno(r.resultado),this.buscarporIdentidad())})}})}ActualizarReligion(){d.default.fire({title:"Control del Sistema",text:"Seleccione Su Religion",input:"select",inputOptions:{Catolica:"Catolica",Evangelico:"Evangelico",Mormon:"Mormon","Sin Religion":"Sin Religion"},showCancelButton:!0,allowOutsideClick:!1}).then(e=>{if(e===null)this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e.value==="")this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e===void 0)this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e.isDismissed)this._DatospersonalesService.mensajeError("Cancelado");else{var a={updtate:e.value,identidad:this.objetoConsultado.identidad};this._DatospersonalesService.actualizarReligion(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):(this._DatospersonalesService.mensajeBueno(r.resultado),this.buscarporIdentidad())})}})}ActualizartipoSangre(){d.default.fire({title:"Control del Sistema",text:"Seleccione el Tipo de Sangre",input:"select",inputOptions:{"A+":"A+","A-":"A-","O+":"O+","O-":"O-","B+":"B+","B-":"B-","AB+":"AB+","AB-":"AB-"},showCancelButton:!0,allowOutsideClick:!1}).then(e=>{if(e===null)this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e.value==="")this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e===void 0)this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e.isDismissed)this._DatospersonalesService.mensajeError("Cancelado");else{var a={updtate:e.value,identidad:this.objetoConsultado.identidad};this._DatospersonalesService.actualizartipoSangre(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):(this._DatospersonalesService.mensajeBueno(r.resultado),this.buscarporIdentidad())})}})}ActualizaNumeropasaporte(){d.default.fire({title:"Control del Sistema",text:"Numero de Pasaporte",input:"text",showCancelButton:!0,allowOutsideClick:!1}).then(e=>{if(e===null)this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e.value==="")this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e===void 0)this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e.isDismissed)this._DatospersonalesService.mensajeError("Cancelado");else{var a={updtate:e.value,identidad:this.objetoConsultado.identidad};this._DatospersonalesService.actualizarPasaporte(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):(this._DatospersonalesService.mensajeBueno(r.resultado),this.buscarporIdentidad())})}})}actualizarCombatiente(){d.default.fire({title:"Control del sistema",text:"Seleccione si es combatiente ",input:"select",inputOptions:{0:"No",1:"Si"},showCancelButton:!0,allowOutsideClick:!1}).then(e=>{if(e===null)this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e.value==="")this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e===void 0)this._DatospersonalesService.mensajeError("Rellene los Campos");else{var a={identidad:this.objetoConsultado.identidad,updtate:e.value};this.formIdentidad.value.identidad=a.identidad,this._DatospersonalesService.actualizarCombatiente(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):(this._DatospersonalesService.mensajeBueno(r.resultado),this.buscarporIdentidad())})}})}ActualizaCuentaBanco(){d.default.fire({title:"Control del Sistema",text:"Cuenta de Banco",input:"text",showCancelButton:!0,allowOutsideClick:!1}).then(e=>{if(e===null)this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e.value==="")this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e===void 0)this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e.isDismissed)this._DatospersonalesService.mensajeError("Cancelado");else{var a={updtate:e.value,identidad:this.objetoConsultado.identidad};this._DatospersonalesService.actualizarCuentaBanco(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):(this._DatospersonalesService.mensajeBueno(r.resultado),this.buscarporIdentidad())})}})}actualizarfechaNacimiento(){if(this.fechanuevadeNacimiento===void 0)this._DatospersonalesService.mensajeError("Seleccione la Fecha");else{var e={identidad:this.objetoConsultado.identidad,updtate:this.fechanuevadeNacimiento};this._DatospersonalesService.actualizarFechaNacimiento(e).subscribe(a=>{a.error?this._DatospersonalesService.mensajeError(a.error):a.mensaje?this._DatospersonalesService.mensajeError(a.mensaje):(this._DatospersonalesService.mensajeBueno(a.resultado),this.buscarporIdentidad())})}}guardarconyugue(){this.formulariopariente.value.combatiente="0",this.formulariopariente.value.identidad=this.formIdentidad.value.identidad,this.arregloConyugue===void 0?this.formulariopariente.valid?this._DatospersonalesService.guardarPerientes(this.formulariopariente.value).subscribe(e=>{if(e.error)this._DatospersonalesService.mensajeError(e.error);else if(e.mensaje)this._DatospersonalesService.mensajeError(e.mensaje);else{var a={identidad1:this.objetoConsultado.identidad,identidad2:this.formulariopariente.value.identidad};this._DatospersonalesService.agregarconyugue(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):(this._DatospersonalesService.mensajeBueno("Guardado con exito"),this.sacarpadres(),this.formulariopariente.reset())})}}):(this._DatospersonalesService.mensajeError("Formulario Incompleto"),this.sacarpadres()):this.arregloConyugue.length===1?this._DatospersonalesService.mensajeError("Titular Ya Cuanta con un conyugue"):this.formulariopariente.valid?this._DatospersonalesService.guardarPerientes(this.formulariopariente.value).subscribe(e=>{if(e.error)this._DatospersonalesService.mensajeError(e.error);else if(e.mensaje)this._DatospersonalesService.mensajeError(e.mensaje);else{var a={identidad1:this.objetoConsultado.identidad,identidad2:this.formulariopariente.value.identidad};this._DatospersonalesService.agregarconyugue(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):(this._DatospersonalesService.mensajeBueno("Guardado con exito"),this.sacarpadres(),this.formulariopariente.reset())})}}):(this._DatospersonalesService.mensajeError("Formulario Incompleto"),this.sacarpadres())}sacarconyugue(){this.arregloConyugue=new Array;var e={identidad:this.objetoConsultado.identidad};this._DatospersonalesService.consultaConyuguePersonal(e).subscribe(a=>{this.arregloConyugue=a.resultado})}eliminaconyugue(e){var a={identidad:e.identidad};this._DatospersonalesService.deleteConyugue(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):(this._DatospersonalesService.mensajeBueno(r.resultado),this.sacarpadres())})}buscarconyugue(){var e;if(this.formIdentidad.valid)if(this.formIdentidad.value.identidad===this.objetoConsultado.identidad)this._DatospersonalesService.mensajeError("Identidad Consultada igual a la identidad del titular");else{var a={identidad_pariente:this.formIdentidad.value.identidad};this._DatospersonalesService.sacarPersonalIdentidad(a).subscribe(r=>{if(r.error)this._DatospersonalesService.mensajeError(r.error.sqlMessage);else if(r.mensaje)this._DatospersonalesService.mensajeError(r.mensaje),this.banderapariente=1;else{e=r.resultado[0];var i={identidad1:this.objetoConsultado.identidad,identidad2:r.resultado[0].identidad};this.arregloConyugue===void 0?this._DatospersonalesService.agregarconyugue(i).subscribe(s=>{s.error?this._DatospersonalesService.mensajeError(s.error):s.mensaje?this._DatospersonalesService.mensajeError(s.mensaje):(this._DatospersonalesService.mensajeBueno("Guardado con exito"),this.sacarpadres(),this.formulariopariente.reset())}):this.arregloConyugue.length===1?this._DatospersonalesService.mensajeError("El titular ya cuenta con su conyugue"):this._DatospersonalesService.agregarconyugue(i).subscribe(s=>{s.error?this._DatospersonalesService.mensajeError(s.error):s.mensaje?this._DatospersonalesService.mensajeError(s.mensaje):(this._DatospersonalesService.mensajeBueno("Guardado con exito"),this.sacarpadres(),this.formulariopariente.reset())})}})}else this._DatospersonalesService.mensajeError("Formato Invalido en la identidad")}sacarArmas(){var e={idfuerza:this.objetoConsultado.idfuerza};this._DatospersonalesService.sacarArmas(e).subscribe(a=>{this.arregloarmas=a.resultado})}sacarArmasPersona(){var e={idfuerza:this.fuerzaSelected.idfuerza};this._DatospersonalesService.sacarArmas(e).subscribe(a=>{this.arregloarmas=a.resultado})}actualizarArma(){let e=d.default.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1});e.fire({title:"\xBFEsta Seguro?",text:"De agregar el arma",icon:"warning",showCancelButton:!0,confirmButtonText:"SI",cancelButtonText:"No",reverseButtons:!0}).then(a=>{if(a.isConfirmed)if(this.armaselected===void 0)this._DatospersonalesService.mensajeError("Seleccione el Arma");else{var r={idarma:this.armaselected.idarmas,identidad:this.objetoConsultado.identidad};this._DatospersonalesService.ActualizarArma(r).subscribe(i=>{i.error?this._DatospersonalesService.mensajeError(i.error):this.buscarporIdentidad()})}else a.dismiss===d.default.DismissReason.cancel&&e.fire("Cancelado","Ejecucion Cancelada","error")})}sacarpadres(){this.arregloPadres=new Array,this.arregloHijos=new Array;var e={identidad:this.objetoConsultado.identidad};this._DatospersonalesService.consultaPadresPersonal(e).subscribe(a=>{this.arregloPadres=a.resultado}),this._DatospersonalesService.consultaHijosPersonal(e).subscribe(a=>{this.arregloHijos=a.resultado}),this.sacarconyugue()}cambiarnombres(){d.default.fire({title:"Cambio de Nombre",text:"1\xB0 Nombre y 2\xB0 Nombre",input:"text",showCancelButton:!0,allowOutsideClick:!1}).then(e=>{if(e===null)this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e.value==="")this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e===void 0)this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e.isDismissed)this._DatospersonalesService.mensajeError("Cancelado");else{var a={nombres:e.value,apellidos:this.objetoConsultado.apellidos,identidad:this.objetoConsultado.identidad};this._DatospersonalesService.actualizarNombresYapellidos(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):(this._DatospersonalesService.mensajeBueno(r.resultado),this.buscarporIdentidad())})}})}cambiarapellidos(){d.default.fire({title:"Cambio de Apellido",text:"1\xB0 Apellidos y 2\xB0 Apellidos",input:"text",showCancelButton:!0,allowOutsideClick:!1}).then(e=>{if(e===null)this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e.value==="")this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e===void 0)this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e.isDismissed)this._DatospersonalesService.mensajeError("Cancelado");else{var a={nombres:this.objetoConsultado.nombres,apellidos:e.value,identidad:this.objetoConsultado.identidad};this._DatospersonalesService.actualizarNombresYapellidos(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):(this._DatospersonalesService.mensajeBueno(r.resultado),this.buscarporIdentidad())})}})}cambiarnumeroAcuerdo(){d.default.fire({title:"Numero de Acuerdo",text:"#Acuerdo",input:"text",showCancelButton:!0,allowOutsideClick:!1}).then(e=>{if(e===null)this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e.value==="")this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e===void 0)this._DatospersonalesService.mensajeError("Rellene los Campos");else if(e.isDismissed)this._DatospersonalesService.mensajeError("Cancelado");else{var a=this.objetoConsultado.fecha.split("T")[0],r={fecha:a,numeroAcuerdo:e.value,identidad:this.objetoConsultado.identidad};this._DatospersonalesService.actualizarAcuerdoyfechaIngreso(r).subscribe(i=>{i.error?this._DatospersonalesService.mensajeError(i.error):(this._DatospersonalesService.mensajeBueno(i.resultado),this.buscarporIdentidad())})}})}actualizarFechaIngreso(){if(this.actualizarfechaIngreso===void 0)this._DatospersonalesService.mensajeError("SELECCIONE LA FECHA.");else{var e={fecha:this.actualizarfechaIngreso,numeroAcuerdo:this.objetoConsultado.numeroAcuerdo,identidad:this.objetoConsultado.identidad};this._DatospersonalesService.actualizarAcuerdoyfechaIngreso(e).subscribe(a=>{a.error?this._DatospersonalesService.mensajeError(a.error):(this._DatospersonalesService.mensajeBueno(a.resultado),this.buscarporIdentidad())})}}ascesoseleccionado(e){this.lineaAsecenso={personal_idpersonal:this.objetoConsultado.personal_idpersonal,banderaPrimerIgreso:e.banderaPrimerIngreso,categoria_idcategoria:e.categoria_idcategoria,ejecutado_por:this.usuarioLoguiado.identidad,fecha:e.fecha.split("T")[0],FechaPrimerIngreso:e.fechaPrimerIngreso.split("T")[0],grado:e.grado,numeroAcuerdo:e.numeroAcuerdo,activo:e.activo,idunidad:e.idunidad,idfuerza:e.idfuerza}}actualizarTabladeAscenso(){this._DatospersonalesService.actualizarTablaascenso(this.lineaAsecenso).subscribe(e=>{e.error?this._DatospersonalesService.mensajeError(e.error):e.mensaje?this._DatospersonalesService.mensajeError(e.mensaje):(this._DatospersonalesService.mensajeBueno(e.resultado),this.buscarporIdentidad(),this.sacarAscensosdelPersonal())},e=>{this._DatospersonalesService.mensajeError("ERROR DE CONECCION | ACTUALIZAR TABLA DE ASCENSO")})}eliminargradoTablaAscenso(){d.default.fire({title:"\xBFEsta seguro de eliminarlo?",text:"Esta usted apunto de eliminar el grado | rango de esta persona.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"SI"}).then(e=>{if(e.isConfirmed)if(this.gradoqueVaQuedar===void 0||this.gradoaeliminar===void 0)this._DatospersonalesService.mensajeError("SELECCION LOS CAMPOS");else if(this.gradoqueVaQuedar.grado===this.gradoaeliminar.grado)this._DatospersonalesService.mensajeError("NO PUEDE SELECCIONAR EL MISMO GRADO QUE VA ELIMINAR");else{var a={gradoEliminar:this.gradoaeliminar.grado,gradoQuevaQuedar:this.gradoqueVaQuedar.grado,personal_idpersonal:this.objetoConsultado.personal_idpersonal};this._DatospersonalesService.eliminarGradoTablaAscenso(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):(this._DatospersonalesService.mensajeBueno(r.resultado),this.buscarporIdentidad(),this.sacarAscensosdelPersonal())},r=>{this._DatospersonalesService.mensajeError("ERROR DE CONECCION | BORRAR GRADO")})}})}guardarTelefono(){var e={numero:this.telefono.value.numeroTelefono,idpersonal:this.objetoConsultado.identidad};this.telefono.valid?this._DatospersonalesService.agregarTelefono(e).subscribe(a=>{a.error?this._DatospersonalesService.mensajeError(a.error.sqlMessage):a.mensaje?this._DatospersonalesService.mensajeError(a.mensaje):this.consultaTelefonoDelPersonal()}):this._DatospersonalesService.mensajeError("No Cumple con el formato")}buscarParientes(){if(this.formIdentidad.valid)if(this.formIdentidad.value.identidad===this.objetoConsultado.identidad)this._DatospersonalesService.mensajeError("Identidad Consultada igual a la identidad del Hijo");else if(this.arregloPadres===void 0){var e={identidad_pariente:this.formIdentidad.value.identidad};this._DatospersonalesService.sacarPersonalIdentidad(e).subscribe(a=>{if(a.error)this._DatospersonalesService.mensajeError(a.error.sqlMessage);else if(a.mensaje)this._DatospersonalesService.mensajeError(a.mensaje),this.banderapariente=1;else{this.parienteConsultado=a.resultado[0];var r={idpadres:this.formIdentidad.value.identidad,idhijo:this.objetoConsultado.identidad};this._DatospersonalesService.guardarpadres(r).subscribe(i=>{i.error?this._DatospersonalesService.mensajeError(i.error):i.mensaje?this._DatospersonalesService.mensajeError(i.mensaje):(this._DatospersonalesService.mensajeBueno("Guardado con exito"),this.formulariopariente.reset(),this.sacarpadres())})}})}else if(this.arregloPadres.length>=2)this._DatospersonalesService.mensajeError("Ya Cuenta con sus dos padres");else{var e={identidad_pariente:this.formIdentidad.value.identidad};this._DatospersonalesService.sacarPersonalIdentidad(e).subscribe(r=>{if(r.error)this._DatospersonalesService.mensajeError(r.error.sqlMessage);else if(r.mensaje)this._DatospersonalesService.mensajeError(r.mensaje),this.banderapariente=1;else{this.parienteConsultado=r.resultado[0];var i={idpadres:this.formIdentidad.value.identidad,idhijo:this.objetoConsultado.identidad};this._DatospersonalesService.guardarpadres(i).subscribe(s=>{s.error?this._DatospersonalesService.mensajeError(s.error):s.mensaje?this._DatospersonalesService.mensajeError(s.mensaje):(this._DatospersonalesService.mensajeBueno("Guardado con exito"),this.formulariopariente.reset(),this.sacarpadres())})}})}else this._DatospersonalesService.mensajeError("Formato Invalido en la identidad")}guardarPariente(){this.formulariopariente.value.combatiente=0,this.formulariopariente.value.identidad=this.formIdentidad.value.identidad,this.formulariopariente.valid?this._DatospersonalesService.guardarPerientes(this.formulariopariente.value).subscribe(e=>{if(e.error)this._DatospersonalesService.mensajeError(e.error);else if(e.mensaje)this._DatospersonalesService.mensajeError(e.mensaje);else{var a={idpadres:this.formulariopariente.value.identidad,idhijo:this.objetoConsultado.identidad};this._DatospersonalesService.guardarpadres(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):(this._DatospersonalesService.mensajeBueno("Guardado con exito"),this.sacarpadres(),this.formulariopariente.reset())})}}):this._DatospersonalesService.mensajeError("Formulario Incompleto")}buscarHijo(){if(this.formIdentidad.valid)if(this.formIdentidad.value.identidad===this.objetoConsultado.identidad)this._DatospersonalesService.mensajeError("Identidad Consultada igual a la identidad del Hijo");else if(this.arregloHijos===void 0){var e={identidad_pariente:this.formIdentidad.value.identidad};this._DatospersonalesService.sacarPersonalIdentidad(e).subscribe(a=>{if(a.error)this._DatospersonalesService.mensajeError(a.error.sqlMessage);else if(a.mensaje)this._DatospersonalesService.mensajeError(a.mensaje),this.banderapariente=1;else{this.parienteConsultado=a.resultado[0];var r={idpadre:this.objetoConsultado.identidad,idhijo:this.formIdentidad.value.identidad};this._DatospersonalesService.guardarhijo(r).subscribe(i=>{i.error?this._DatospersonalesService.mensajeError(i.error):i.mensaje?this._DatospersonalesService.mensajeError(i.mensaje):(this._DatospersonalesService.mensajeBueno("Guardado con exito"),this.formulariopariente.reset(),this.sacarpadres())})}})}else if(this.arregloHijos.length>=30)this._DatospersonalesService.mensajeError("Ya Cuenta con sus dos padres");else{var e={identidad_pariente:this.formIdentidad.value.identidad};this._DatospersonalesService.sacarPersonalIdentidad(e).subscribe(r=>{if(r.error)this._DatospersonalesService.mensajeError(r.error.sqlMessage);else if(r.mensaje)this._DatospersonalesService.mensajeError(r.mensaje),this.banderapariente=1;else{this.parienteConsultado=r.resultado[0];var i={idpadre:this.objetoConsultado.identidad,idhijo:this.formIdentidad.value.identidad};this._DatospersonalesService.guardarhijo(i).subscribe(s=>{s.error?this._DatospersonalesService.mensajeError(s.error):s.mensaje?this._DatospersonalesService.mensajeError(s.mensaje):(this._DatospersonalesService.mensajeBueno("Guardado con exito"),this.formulariopariente.reset(),this.sacarpadres())})}})}else this._DatospersonalesService.mensajeError("Formato Invalido en la identidad")}guardarHijo(){this.formulariopariente.value.combatiente=0,this.formulariopariente.value.identidad=this.formIdentidad.value.identidad,this.formulariopariente.valid?this._DatospersonalesService.guardarPerientes(this.formulariopariente.value).subscribe(e=>{if(e.error)this._DatospersonalesService.mensajeError(e.error);else if(e.mensaje)this._DatospersonalesService.mensajeError(e.mensaje);else{var a={idpadre:this.objetoConsultado.identidad,idhijo:this.formulariopariente.value.identidad};this._DatospersonalesService.guardarhijo(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):(this._DatospersonalesService.mensajeBueno("Guardado con exito"),this.sacarpadres(),this.formulariopariente.reset())})}}):this._DatospersonalesService.mensajeError("Formulario Incompleto")}agregarPaises(){if(this.paisSelected===void 0)this._DatospersonalesService.mensajeError("Seleccione el Idioma");else{var e={idpersonal:this.objetoConsultado.identidad,idpais:this.paisSelected.idpaises};this._DatospersonalesService.guardarpaisdelpersonal(e).subscribe(a=>{a.error?this._DatospersonalesService.mensajeError(a.error):a.mensaje?this._DatospersonalesService.mensajeError(a.mensaje):(this.arregloMisPaises=a.resultado,this.sacarMisPaises())})}}agrgarIdioma(){this.idiomaSelected.idpersonal=this.objetoConsultado.identidad,this.idiomaSelected.nivel<1||this.idiomaSelected.nivel>100||this.idiomaSelected.idmisidiomas===""||this.idiomaSelected.idpersonal===""?this._DatospersonalesService.mensajeError("No cumple con el formato | selecione el idioma | nivel > 0 y <=100"):this._DatospersonalesService.guardaridiomadelpersonal(this.idiomaSelected).subscribe(e=>{e.error?this._DatospersonalesService.mensajeError(e.error):e.mensaje?this._DatospersonalesService.mensajeError(e.mensaje):(this._DatospersonalesService.mensajeBueno("Agregado con exito"),this.sacarmisidiomas())})}guardarAresto(){this.formularioAresto.value.identidad=this.consulta.identidad,this.formularioAresto.valid?this._DatospersonalesService.guardarAresto(this.formularioAresto.value).subscribe(e=>{e.error?this._DatospersonalesService.mensajeError(e.error.sqlMessage):e.mensaje?this._DatospersonalesService.mensajeError(e.mensaje):(this._DatospersonalesService.mensajeBueno("Excelente"),this.sacarArestosdelPersonal())}):(this.noesvalido=!0,this._DatospersonalesService.mensajeError("Rellene los Campos"))}buscarPersonaParaOrdenarAresto(){var e={identidad_pariente:this.formularioAresto.value.identidadAcusador};this._DatospersonalesService.sacarPersonalIdentidad(e).subscribe(a=>{a.error?this._DatospersonalesService.mensajeError(a.error.sqlMessage):a.mensaje?this._DatospersonalesService.mensajeError(a.mensaje):this.personaQueAreasta=a.resultado[0]})}guardardocumentoDElArresto(){this.makeFileReques(this._DatospersonalesService.url2+"subirdocumentosArresto/"+this.idarrestoSelected,[],this.FilesToUploads).then(e=>{this.imgURL="",e.error?this._DatospersonalesService.mensajeError(e.error):e.mesaje?this._DatospersonalesService.mensajeError(e.mensaje):(this._DatospersonalesService.mensajeBueno(e.resultado),this.sacarArestosdelPersonal())})}EliminarArresto(e){d.default.fire({title:"<strong>ELIMINAR</strong>",html:"Esta Apunto de Eliminar el Arresto de esta Persona.<b>\xBFEsta usted seguro de ejecutar esta funci\xF3n?</b>, ",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Eliminar",cancelButtonText:"No Eliminar"}).then(a=>{if(a.isConfirmed){var r={identidadElaboradopor:e.identidad,identidad:this.objetoConsultado.identidad,fechaArresto:e.fecha,hora:e.horas,identidadEjecutora:this.usuarioLoguiado.identidad,concepto:"Se elimino el arresto de :"+this.objetoConsultado.identidad+", Nombre: "+this.objetoConsultado.nombres+" "+this.objetoConsultado.apellidos+", Concepto: "+e.motivo+"; Fecha Arresto; "+e.fecha+"; Horas:"+e.horas+"; orden de: ID "+e.identidad+" "+e.nombres+" "+e.apellidos};this.deleteDocumentoArresto(e.idarrestos,e.archivo),this._DatospersonalesService.eliminarArresto(r).subscribe(i=>{i.error?this._DatospersonalesService.mensajeError(i.error):i.mensaje?this._DatospersonalesService.mensajeBueno(i.mensaje):(this._DatospersonalesService.mensajeBueno(i.resultado),this.sacarArestosdelPersonal())},i=>{this._DatospersonalesService.mensajeError("ERROR DE CONECCION AL SERVIDOR AL TRATAR DE ELIMINAR")})}else d.default.fire("CANCELADO","ACCION CANCELADA","error")})}reasignar(){if(this.objetoConsultado.codigo!=="TRO")if(this.unidadSelected===void 0||this.fechaSelected===void 0||this.fuerzaSelected===void 0)this._DatospersonalesService.mensajeError("RELLENE TODO LOS CAMPOS");else{var e=!1;if(this.arregloAsignaciones.forEach(s=>{s.fecha_asignacion.split("T")[0]===this.fechaSelected&&(e=!0)}),e)d.default.fire("Control del Sistema","No puede haber Dos Asignaciones en la misma fecha","question");else{var a={identidad:this.objetoConsultado.identidad,idunidad:this.unidadSelected.idunidad,fecha_asignacion:this.fechaSelected,idfuerzaActual:this.objetoConsultado.idfuerza,idfueraAmover:this.fuerzaSelected.idfuerza,nivel:this.objetoConsultado.nivel,idelaborado:this.usuarioLoguiado.identidad};this.esperar=!this.esperar,this._DatospersonalesService.reasignarOficialesAuxSub(a).subscribe(s=>{this.esperar=!this.esperar,s.error?this._DatospersonalesService.mensajeError(s.error):(this._DatospersonalesService.mensajeBueno(s.mensaje),this.sacarAsignacionesPersonal())},s=>{this.esperar=!this.esperar,this._DatospersonalesService.mensajeError("Error de Conecci\xF3n")})}}else if(this.unidadSelected===void 0||this.fechaSelected===void 0||this.fuerzaSelected===void 0)this._DatospersonalesService.mensajeError("RELLENE TODO LOS CAMPOS");else{var e=!1;if(this.arregloAsignaciones.forEach(t=>{t.fecha_asignacion.split("T")[0]===this.fechaSelected&&(e=!0)}),e)d.default.fire("Control del Sistema","No puede haber Dos Asignaciones en la misma fecha","question");else{var r;if(this.arregloAsignaciones.forEach(t=>{t.actual===1&&(r=t)}),r===void 0)var i={identidad:this.objetoConsultado.identidad,idunidad:this.unidadSelected.idunidad,fecha_asignacion:this.fechaSelected,idfuerzaActual:this.objetoConsultado.idfuerza,idfueraAmover:this.fuerzaSelected.idfuerza,nivel:this.objetoConsultado.nivel,idelaborado:this.usuarioLoguiado.identidad};else var i={identidad:this.objetoConsultado.identidad,idunidad:this.unidadSelected.idunidad,fecha_asignacion:this.fechaSelected,idfuerzaActual:r.idfuerza,idfueraAmover:this.fuerzaSelected.idfuerza,nivel:this.objetoConsultado.nivel,idelaborado:this.usuarioLoguiado.identidad};this.esperar=!this.esperar,this._DatospersonalesService.asignarpersonalaUnidad(i).subscribe(t=>{this.esperar=!this.esperar,t.error?this._DatospersonalesService.mensajeError(t.error.sqlMessage):(this._DatospersonalesService.mensajeBueno("Usuario Asignado Con exito"),this.sacarAsignacionesPersonal())},t=>{this.esperar=!this.esperar,this._DatospersonalesService.mensajeError("Error de Conecci\xF3n")})}}}guardarDocumentoTexto(){if(this.banderaEspiner=1,this.nombreDocumento===void 0||this.FilesToUploads===void 0)d.default.fire("Rellene los campos"),this.banderaEspiner=0;else{var e={nombre:this.nombreDocumento,dir:"ninguno.PNG",idcarpeta:this.idcarpetaSegundaria};this._DatospersonalesService.guardarDocumento(e).subscribe(a=>{a.error?(this._DatospersonalesService.mensajeError(a.error),this.banderaEspiner=0):a.mensaje?(this._DatospersonalesService.mensajeError(a.mensaje),this.banderaEspiner=0):a.resultado&&this.guardardocumento(a.resultado.insertId)})}}guardardocumento(e){var a=this._DatospersonalesService.url2+"subirdocumentos/"+e;this.makeFileReques(a,[],this.FilesToUploads).then(r=>{this.imgURL="",r.error?(this._DatospersonalesService.mensajeError(r.error),this.banderaEspiner=0):r.mesaje?(this._DatospersonalesService.mensajeError(r.mensaje),this.banderaEspiner=0):(this._DatospersonalesService.mensajeBueno(r.resultado),this.banderaEspiner=0,this.buscardocumentos(this.idcarpetaSegundaria))},r=>{alert("OCURRIO UN ERROR AL TRATAR DE SUBIR EL ARCHIVO CON IDENTIFICADOR: "+e),this.eliminar(e,"ninguno.PNG"),this.banderaEspiner=0})}guardarAsignacionDireccion(){if(this.fechaSelected===""||this.fechaSelected===void 0||this.direccionSelected===void 0)this._DatospersonalesService.mensajeError("RELLENE LOS CAMPOS");else{var e={identidad:this.objetoConsultado.identidad,identidadEjecutora:this.usuarioLoguiado.identidad,idNombramiento:this.direccionSelected.idNombramiento,idgrado:this.objetoConsultado.grado,direccion:this.direccionSelected.descripcion,fechaAsignacion:this.fechaSelected,fechaSalida:this.fechaSelected,unidad:this.unidadSelected};this._DatospersonalesService.agregarAsignacionDireccion(e).subscribe(a=>{a.error?this._DatospersonalesService.mensajeError(a.error):a.mensaje?this._DatospersonalesService.mensajeError(a.mensaje):(this.sacarDireccionDeAsignado(),this.fechaSelected="",this._DatospersonalesService.mensajeBueno(a.resultado))},a=>{this._DatospersonalesService.mensajeError("ERROR CONEXION AL INGRESAR ASIGNACION (DIRECCION | ASIGNACION)")})}}sacarDireccionDeAsignado(){this.arreglosDeMisAsignacionesDirecciones=new Array;var e={identidad:this.objetoConsultado.identidad};this._DatospersonalesService.sacarDireccionDeAsignado(e).subscribe(a=>{this.arreglosDeMisAsignacionesDirecciones=a.resultado},a=>{this._DatospersonalesService.mensajeError("ERROR CONEXION AL INGRESAR ASIGNACION (DIRECCION | ASIGNACION)")})}guardarCargo(){if(this.puestoSelected===void 0||this.fechaSelected===void 0||this.objetoConsultado.identidad===void 0||this.numeroAcuerdo===void 0||this.usuarioLoguiado.identidad===void 0||this.objetoConsultado===void 0)this._DatospersonalesService.mensajeError("HAY CAMPOS NO SELECCIONADOS");else{var e={idPuesto:this.puestoSelected.idPuesto,fechaInicio:this.fechaSelected,identidad:this.objetoConsultado.identidad,fechaFin:"null",acuerdo:this.numeroAcuerdo,elaborado_por:this.usuarioLoguiado.identidad,idgrado:this.objetoConsultado.grado};this._DatospersonalesService.agregarPersonaenOrganizacion(e).subscribe(a=>{a.error?this._DatospersonalesService.mensajeError(a.error):a.mensaje?this._DatospersonalesService.mensajeError(a.mensaje):(this._DatospersonalesService.mensajeBueno(a.resultado),this.sacsarcargodelapersona())})}}desactivarAsignacionDireccion(e){d.default.fire({title:"Esta Seguro",text:"Esta apunto de desactivar la asignacion",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"SI",cancelButtonText:"NO"}).then(a=>{if(a.isConfirmed){var r={identidad:this.objetoConsultado.identidad,identidadEjecutora:this.usuarioLoguiado.identidad,direccion:e.descripcion,unidad:e.unidad};this._DatospersonalesService.desactivarAsignacionDireccion(r).subscribe(i=>{i.error?this._DatospersonalesService.mensajeError(i.error):i.mensaje?this._DatospersonalesService.mensajeError(i.mensaje):(this.sacarDireccionDeAsignado(),this._DatospersonalesService.mensajeBueno(i.resultado))},i=>{this._DatospersonalesService.mensajeError("ERROR DE CONECCION AL DESACTIVAR LA DIRECCION")})}else d.default.fire("Cancelado!","","success")})}sacarasignaciondireccionActual(e){var a={identidad:this.objetoConsultado.identidad};this._DatospersonalesService.sacarDireccionAsignadoActual(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?this.seccionselected=r:(this.seccionselected=r.resultado[0],this.sacarpuestos())},r=>{this._DatospersonalesService.mensajeError("ERROR DE CONECCION AL SACAR ASIGNACION DE DIRECCION")})}CambioIdentidadPErsonalAdmin(){return I(this,null,function*(){var e=yield this._DatospersonalesService.mensajePregunta("Cambio de Identidad","Esta seguro de Remplazar la Identidad");if(e)if(this.formIdentidad.valid)if(this.objetoConsultado.identidad===this.usuarioLoguiado.identidad)this._DatospersonalesService.mensajeError("USTED MISMO NO SE PUEDE CAMBIAR LA IDENTIDAD");else if(this.objetoConsultado.identidad===void 0||this.usuarioLoguiado.identidad===void 0)this._DatospersonalesService.mensajeError("ERROR EN IDENTIDAD VIEJA O IDENTIDAD DE USUARIO LOGIADO");else{var a={identidadNueva:this.formIdentidad.value.identidad,identidadVieja:this.objetoConsultado.identidad,identidadEjecutora:this.usuarioLoguiado.identidad};this._DatospersonalesService.cambioIdentidad(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):(this._DatospersonalesService.mensajeBueno(r.resultado),this.consulta.identidad="",this.formIdentidad.reset(),this.desplegar=2,this.SegundaVentana=0)},r=>{this._DatospersonalesService.mensajeError("ERROR DE CONECCION AL MOMENTO DE CAMBIAR LA IDENTIDAD"),this._Router.navigate(["bienvenida"])})}else this._DatospersonalesService.mensajeError("LA IDENTIDAD NUEVA NO CUENTA CON EL FORMATO");this.formIdentidad.reset()})}buscarCupos(){this.desplegar=4,this.sacarcuposdeUnidad()}sacarcuposdeUnidad(){var e={idunidad:this.unidadSelected.idunidad,activo:1};this.arregloCupos=new Array,this._DatospersonalesService.sacarcoposhabilitados(e).subscribe(a=>{a.error?this._DatospersonalesService.mensajeError(a.error):a.mensaje?this._DatospersonalesService.mensajeError(a.mensaje):this.arregloCupos=a.resultado},a=>{this._DatospersonalesService.mensajeError("ERROR DE CONEXION")})}desactivarCupos(e){var a={idgrado:e.idgrado,idunidad:e.idunidad,activo:e.activo===0?1:0,usuario:this.usuarioLoguiado};this._DatospersonalesService.desactivarCupos(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):this.sacarcuposdeUnidad()},r=>{this._DatospersonalesService.mensajeError("ERRRO DE CONEXION")})}selecionarTarjeta(e){this.cupos.reset(),this.objetoSelecionado=e}guardarCuponuevo(){if(this.cupos.valid){var e={idunidad:this.objetoSelecionado.idunidad,idgrado:this.objetoSelecionado.idgrado,autorizado:this.cupos.value.numero,usuario:this.usuarioLoguiado,copoAnterior:this.objetoSelecionado.autorizado,nombreUnidad:this.objetoSelecionado.unidad,gradoNombre:this.objetoSelecionado.nombre_grado};this._DatospersonalesService.modificarcupo(e).subscribe(a=>{a.error?this._DatospersonalesService.mensajeError(a.error):a.mensaje?this._DatospersonalesService.mensajeError(a.mensaje):(this.cupos.reset(),this.sacarcuposdeUnidad())},a=>{this._DatospersonalesService.mensajeError("ERROR DE CONEXION")})}else this._DatospersonalesService.mensajeError("Solo numero  debe de ingresar.")}guardarCambioCombatiente(e){var a={idunidad:e.idunidad,idgrado:e.idgrado,combatiente:e.combatiente===0?1:0,usuario:this.usuarioLoguiado,unidadnombre:e.unidad,gradoNombre:e.nombre_grado};this._DatospersonalesService.modificarSiesCombatiente(a).subscribe(r=>{r.error?this._DatospersonalesService.mensajeError(r.error):r.mensaje?this._DatospersonalesService.mensajeError(r.mensaje):(a={idunidad:"",idgrado:"",combatiente:0,usuario:"",unidadnombre:"",gradoNombre:e.nombre_grado},this.sacarcuposdeUnidad())},r=>{this._DatospersonalesService.mensajeError("ERROR DE CONEXION")})}buscarGRados(){var e={idfuerza:this.fuerzaSelected.idfuerza,idgradoOrden:this.ordencategoriaSelected.idControl_Grado};this._DatospersonalesService.sacarGradosSegunOrden(e).subscribe(a=>{a.error?this._DatospersonalesService.mensajeError(a.error):a.mensaje?this._DatospersonalesService.mensajeError(a.mensaje):this.arreglosRam=a.resultado},a=>{this._DatospersonalesService.mensajeError("ERROR DE CONEXION")})}GuardarCupos(e){if(e.valid){var a;this.fuerzaSelected.idfuerza===2?a=2:this.fuerzaSelected.idfuerza===3?a=3:this.fuerzaSelected.idfuerza===4?a=4:a=3;var r={idfuerza:a,idunidad:this.unidadSelected.idunidad,autorizado:this.agregarNuevoCupo.cantidadAutorizada,ocupados:0,combatiente:this.agregarNuevoCupo.combatiente,activo:1,idgrado:this.objetoSelecionado.idgrado,toe_autorizada:0,idcategoria:this.objetoSelecionado.idcategoria,fechaIngreso:this.agregarNuevoCupo.fechaIngreso,usuario:this.usuarioLoguiado,nombreunidad:this.unidadSelected.unidad,nombreGrado:this.objetoSelecionado.nombre_grado,ue:e.value.ordencategoriaSelected.idControl_Grado===7||e.value.ordencategoriaSelected.idControl_Grado===8?e.value.ue:{idunidad_ejecutora:0}};this._DatospersonalesService.agregarnuevoscupos(r).subscribe(i=>{i.error?this._DatospersonalesService.mensajeError(i.error):i.mensaje?this._DatospersonalesService.mensajeError(i.mensjae):(this._DatospersonalesService.mensajeBueno(i.resultado),this.sacarcuposdeUnidad())},i=>{this._DatospersonalesService.mensajeError("ERROR DE CONEXION")})}else this._DatospersonalesService.mensajeError("FORMULARIO INVALIDO")}eliminarTarjetaIngreso(e){return I(this,null,function*(){var a=yield this._DatospersonalesService.mensajePregunta("Eliminar","Esta seguro de eliminar esta tarjeta");if(a){var r={idunidad:e.idunidad,idgrado:e.idgrado,nombreunidad:e.unidad,nombreGrado:e.nombre_grado+" | "+e.equivalente,usuario:this.usuarioLoguiado};this._DatospersonalesService.EliminarTarjetadeIngreso(r).subscribe(i=>{i.error?this._DatospersonalesService.mensajeError(i.error):i.mensaje?this._DatospersonalesService.mensajeError(i.mensaje):(this._DatospersonalesService.mensajeBueno(i.resultado),this.sacarcuposdeUnidad())},i=>{this._DatospersonalesService.mensajeError("ERROR DE CONEXION")})}})}verificarPermiso(e){return this._DatospersonalesService.verificarPermisos(e)}cambiarnombreCarpetaPrincipal(e){d.default.fire({title:"Nuevo Nombre",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Cambiar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,preConfirm:a=>{if(a!==""){var r={idcarpetaPrincipal:e.idcarpetaPrincipal,nombrecarpeta:a};this.esperar=!this.esperar,this._DatospersonalesService.cambiarnombreCarpetaPrincipal(r).subscribe(i=>(i.error?this._DatospersonalesService.mensajeError(i.error):i.mensaje?this._DatospersonalesService.mensajeError(i.mensaje):(this._DatospersonalesService.mensajeBueno(i.resultado),this.archivoPrincipal()),this.esperar=!this.esperar,a),i=>(this._DatospersonalesService.mensajeError("Error de Conexion"),this.esperar=!this.esperar,a))}},allowOutsideClick:()=>!d.default.isLoading()}).then(a=>{a.isConfirmed})}cambiarnombreCarpetaSegundaria(e){d.default.fire({title:"Nuevo Nombre",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Cambiar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,preConfirm:a=>{if(a!==""){var r={idcarpetasegundaria:e.idcarpetasegundaria,Nombre:a};this.esperar=!this.esperar,this._DatospersonalesService.cambiarnombreCarpetaSegundaria(r).subscribe(i=>(i.error?this._DatospersonalesService.mensajeError(i.error):i.mensaje?this._DatospersonalesService.mensajeError(i.mensaje):(this._DatospersonalesService.mensajeBueno(i.resultado),this.buscarSegundacarpeta(this.idcarpetaPrincipal)),this.esperar=!this.esperar,a),i=>(this._DatospersonalesService.mensajeError("Error de Conexion"),this.esperar=!this.esperar,a))}},allowOutsideClick:()=>!d.default.isLoading()}).then(a=>{a.isConfirmed})}puestoseleccionado(e){this.puestoSeleccionado=e}cambiarNombrePuesto(e,a){return I(this,null,function*(){if(yield this._DatospersonalesService.mensajePregunta("Alto","Esta seguro de cambiar el nombre")){let i={nombre:e,idPuesto:this.puestoSeleccionado.idPuesto};this._ServiciosMensajeService.show(),this._DatospersonalesService.actualizarNombrePuesto(i).subscribe(s=>{if(this._ServiciosMensajeService.hide(),s.error)return this._DatospersonalesService.mensajeError(s.error);if(s.mensaje)return this._DatospersonalesService.mensajeError(s.mensaje);this._DatospersonalesService.mensajeBueno(s.resultado),this.mostrarCambioNombrePuesto=!1,this.sacarPuestos_delNombramiento(this.nombramientoSelected),this.formIdentidad.reset()},s=>{this._ServiciosMensajeService.hide(),this._DatospersonalesService.mensajeError("Error de Conexion")})}})}};v.\u0275fac=function(a){return new(a||v)(N(q),N(V),N(W),N(H))},v.\u0275cmp=U({type:v,selectors:[["app-crear-puestos"]],decls:114,vars:47,consts:[["orgForm","ngForm"],["formNombramiento","ngForm"],["formPuesto","ngForm"],["formModificar","ngForm"],["nombre","ngModel"],[1,"container","py-5"],[1,"row","justify-content-center"],[1,"col-lg-7","col-md-9"],[1,"card","shadow-lg","border-0","rounded-4"],[1,"card-header","bg-success","text-white","rounded-top-4","d-flex","align-items-center","px-4"],[1,"pi","pi-building","me-2"],[1,"mb-0"],[1,"card-body","px-4","py-4"],["novalidate","",1,"row","g-4"],[1,"col-12"],[1,"form-label","fw-semibold","text-muted","small","mb-1"],["optionLabel","nombre","name","fuerzaSelected","placeholder","Seleccione una fuerza","required","",1,"w-100",3,"ngModelChange","onChange","options","ngModel","filter","showClear"],["optionLabel","unidad","name","unidadSelected","placeholder","Seleccione una unidad","required","",1,"w-100",3,"ngModelChange","options","ngModel","filter","showClear"],[1,"col-12","d-flex","justify-content-end","mt-2"],["pButton","","type","button","label","+ Direcci\xF3n / Secci\xF3n",1,"p-button-success","p-button-rounded",3,"click","disabled"],[1,"pi","pi-search","me-2"],["header","Control de organizaci\xF3n",3,"visibleChange","visible","modal","blockScroll","draggable","resizable","closable"],[1,"mb-3"],[1,"row","g-2"],[1,"col-md-4"],[1,"form-label","small","text-muted","mb-1"],[1,"form-control-plaintext","fw-semibold","bg-light","rounded-3","px-3","py-2"],[1,"col-md-8"],[1,"my-3"],["novalidate","",1,"row","g-3","mb-3"],[1,"col-md-10"],["type","text","pInputText","","name","nombramiento","placeholder","Ej: Direcci\xF3n de Personal","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-2"],["type","number","pInputText","","name","orden","min","1","required","",1,"form-control","text-center",3,"ngModelChange","ngModel"],[1,"col-12","mt-1"],["pButton","","type","button","label","Guardar nombramiento","icon","pi pi-save",1,"p-button-success","w-25",3,"click","disabled"],[1,"mt-3"],[1,"text-muted","text-uppercase","small","mb-2"],[1,"table-responsive",2,"max-height","45vh","overflow-y","auto"],[1,"table","table-sm","table-bordered","table-hover","align-middle","mb-0","tabla-nombramientos"],[1,"table-light","text-center"],[2,"width","40px"],[2,"width","70px"],[2,"width","90px"],[1,"text-center"],["pTemplate","footer"],["header","Control de puestos",3,"visibleChange","visible","modal","blockScroll","draggable","resizable","closable"],["type","text","pInputText","","name","Nombre_Puesto","placeholder","Ej: Jefe de Secci\xF3n","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","pInputText","","name","orden","min","0","required","",1,"form-control","text-center",3,"ngModelChange","ngModel"],["pButton","","type","button","label","Guardar puesto","icon","pi pi-save",1,"p-button-success","w-25",2,"cursor","pointer",3,"click","disabled"],[1,"table","tabla-puestos","table-hover","align-middle","mb-0"],[1,"col-num"],[1,"col-nombre"],[1,"col-orden"],[1,"col-acciones"],["header","Cambiar nombre del puesto",3,"visibleChange","visible","modal","blockScroll","draggable","resizable","closable"],["novalidate","",1,"row","g-3"],["type","text","pInputText","","name","nombre","required","","placeholder","Ej: Jefe de Secci\xF3n",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12","mt-2"],["pButton","","type","button","label","Guardar","icon","pi pi-save",1,"p-button-success","w-50",2,"background-color","black","color","white",3,"click","disabled"],["scope","row"],[1,"text-start"],[1,"acciones-nombramiento"],["pButton","","type","button","icon","","title","Agregar puestos",1,"p-button-rounded1","p-button-success","p-button-sm","me-1",3,"click"],[1,"pi","pi-clone"],["pButton","","type","button","title","Eliminar nombramiento",1,"p-button-rounded","p-button-danger","p-button-sm","p-button-outlined",3,"click"],[1,"pi","pi-trash"],[1,"d-flex","justify-content-end"],["pButton","","type","button","label","Cerrar","icon","pi pi-times",1,"p-button-text",3,"click"],[1,"acciones-puestos"],["pButton","","title","Eliminar puesto",1,"action-btn","delete",3,"click"],["pButton","","title","Cambiar nombre",1,"action-btn","edit",3,"click"],[1,"pi","pi-pencil"],["colspan","4",1,"text-center","text-muted","py-3"],[1,"pi","pi-info-circle","me-1"]],template:function(a,r){if(a&1){let i=O();o(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9),E(5,"i",10),o(6,"h5",11),l(7,"Crear Organizaci\xF3n"),n()(),o(8,"div",12)(9,"form",13,0)(11,"div",14)(12,"label",15),l(13,"Fuerza"),n(),o(14,"p-select",16),D("ngModelChange",function(t){return h(i),j(r.fuerzaSelected,t)||(r.fuerzaSelected=t),p(t)}),_("onChange",function(){return h(i),p(r.sacarunidades())}),n()(),o(15,"div",14)(16,"label",15),l(17,"Unidad"),n(),o(18,"p-select",17),D("ngModelChange",function(t){return h(i),j(r.unidadSelected,t)||(r.unidadSelected=t),p(t)}),n()(),o(19,"div",18)(20,"button",19),_("click",function(){return h(i),r.sacarNombranmiento(),p(r.mostrarModalDireccion=!0)}),E(21,"i",20),l(22," Siguiente "),n()()()()()()()(),o(23,"p-dialog",21),D("visibleChange",function(t){return h(i),j(r.mostrarModalDireccion,t)||(r.mostrarModalDireccion=t),p(t)}),o(24,"div",22)(25,"div",23)(26,"div",24)(27,"label",25),l(28,"Fuerza"),n(),o(29,"div",26),l(30),n()(),o(31,"div",27)(32,"label",25),l(33,"Unidad"),n(),o(34,"div",26),l(35),n()()()(),E(36,"hr",28),o(37,"form",29,1)(39,"div",30)(40,"label",25),l(41," Nombre de la nueva Secci\xF3n / Dept. / Dir. "),n(),o(42,"input",31),D("ngModelChange",function(t){return h(i),j(r.data.nombramiento,t)||(r.data.nombramiento=t),p(t)}),n()(),o(43,"div",32)(44,"label",25),l(45,"Orden"),n(),o(46,"input",33),D("ngModelChange",function(t){return h(i),j(r.data.orden,t)||(r.data.orden=t),p(t)}),n()(),o(47,"div",34)(48,"button",35),_("click",function(){return h(i),p(r.guardar_Nombramiento())}),l(49,"Guardar"),n()()(),o(50,"div",36)(51,"h6",37),l(52,"Listado de nombramientos"),n(),o(53,"div",38)(54,"table",39)(55,"thead",40)(56,"tr")(57,"th",41),l(58,"#"),n(),o(59,"th"),l(60,"Nombre"),n(),o(61,"th",42),l(62,"Orden"),n(),o(63,"th",43),l(64,"Acciones"),n()()(),o(65,"tbody",44),T(66,me,14,3,"tr",null,ce),n()()()(),B(68,he,2,0,"ng-template",45),n(),o(69,"p-dialog",46),D("visibleChange",function(t){return h(i),j(r.mostrarModalPuesto,t)||(r.mostrarModalPuesto=t),p(t)}),o(70,"form",29,2)(72,"div",27)(73,"label",25),l(74," Nombre del puesto "),n(),o(75,"input",47),D("ngModelChange",function(t){return h(i),j(r.dataPuesto.Nombre_Puesto,t)||(r.dataPuesto.Nombre_Puesto=t),p(t)}),n()(),o(76,"div",24)(77,"label",25),l(78," Orden jer\xE1rquico "),n(),o(79,"input",48),D("ngModelChange",function(t){return h(i),j(r.dataPuesto.orden,t)||(r.dataPuesto.orden=t),p(t)}),n()(),o(80,"div",34)(81,"button",49),_("click",function(){return h(i),p(r.guardarPuesto())}),l(82,"Guardar"),n()()(),o(83,"div",36)(84,"h6",37),l(85,"Listado de puestos"),n(),o(86,"div",38)(87,"table",50)(88,"thead")(89,"tr")(90,"th",51),l(91,"#"),n(),o(92,"th",52),l(93,"Nombre"),n(),o(94,"th",53),l(95,"Orden"),n(),o(96,"th",54),l(97,"Acciones"),n()()(),o(98,"tbody"),T(99,pe,12,3,"tr",null,ue),k(101,ve,4,0,"tr"),n()()()(),B(102,be,2,0,"ng-template",45),n(),o(103,"p-dialog",55),D("visibleChange",function(t){return h(i),j(r.mostrarCambioNombrePuesto,t)||(r.mostrarCambioNombrePuesto=t),p(t)}),o(104,"form",56,3)(106,"div",14)(107,"label",25),l(108," Nuevo nombre "),n(),o(109,"input",57,4),D("ngModelChange",function(t){return h(i),j(r.nuevoNombrePuesto,t)||(r.nuevoNombrePuesto=t),p(t)}),n()(),o(111,"div",58)(112,"button",59),_("click",function(){h(i);let t=L(105);return p(r.cambiarNombrePuesto(r.nuevoNombrePuesto,t))}),l(113,"Guardar"),n()()()()}if(a&2){let i=L(105);c(14),f("options",r.arregloFuerzas),g("ngModel",r.fuerzaSelected),f("filter",!0)("showClear",!0),c(4),f("options",r.ArregloUnidades),g("ngModel",r.unidadSelected),f("filter",!0)("showClear",!0),c(2),f("disabled",!r.unidadSelected||!r.fuerzaSelected),c(3),M(x(44,ne)),g("visible",r.mostrarModalDireccion),f("modal",!0)("blockScroll",!0)("draggable",!1)("resizable",!1)("closable",!0),c(7),F(" ",(r.fuerzaSelected==null?null:r.fuerzaSelected.nombre)||"-"," "),c(5),F(" ",(r.unidadSelected==null?null:r.unidadSelected.unidad)||"-"," "),c(7),g("ngModel",r.data.nombramiento),c(4),g("ngModel",r.data.orden),c(2),f("disabled",!(r.data!=null&&r.data.nombramiento)||!(r.data!=null&&r.data.orden)),c(18),z(r.ArregloNombramiento),c(3),M(x(45,le)),g("visible",r.mostrarModalPuesto),f("modal",!0)("blockScroll",!0)("draggable",!1)("resizable",!1)("closable",!0),c(6),g("ngModel",r.dataPuesto.Nombre_Puesto),c(4),g("ngModel",r.dataPuesto.orden),c(2),f("disabled",!(r.dataPuesto!=null&&r.dataPuesto.Nombre_Puesto)||(r.dataPuesto==null?null:r.dataPuesto.orden)===void 0),c(18),z(r.ArregloPuestos),c(2),G(!r.ArregloPuestos||r.ArregloPuestos.length===0?101:-1),c(2),M(x(46,de)),g("visible",r.mostrarCambioNombrePuesto),f("modal",!0)("blockScroll",!0)("draggable",!1)("resizable",!1)("closable",!0),c(6),g("ngModel",r.nuevoNombrePuesto),c(3),f("disabled",!i.valid)}},dependencies:[re,K,X,$,Q,Y,ee,R,Z,J,ae,se,ie],styles:[".card-header[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.p-select[_ngcontent-%COMP%]{border-radius:10px!important}.p-button-rounded[_ngcontent-%COMP%]{border-radius:20px!important;padding:.6rem 1.5rem!important;background-color:#f3b0b0!important;color:#fff!important}.p-button-rounded1[_ngcontent-%COMP%]{border-radius:20px!important;padding:.6rem 1.5rem!important;background-color:#686464!important;color:#fff!important}.tabla-nombramientos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .tabla-nombramientos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.85rem}.tabla-nombramientos[_ngcontent-%COMP%]   .acciones-nombramiento[_ngcontent-%COMP%]{white-space:nowrap}.tabla-nombramientos[_ngcontent-%COMP%]   .acciones-nombramiento[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{padding:.2rem .4rem!important}.tabla-nombramientos[_ngcontent-%COMP%]   .acciones-nombramiento[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]   .pi[_ngcontent-%COMP%]{font-size:.85rem}.tabla-puestos[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0 6px!important}.tabla-puestos[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:#f5f7fa!important;border-bottom:2px solid #e2e6ea}.tabla-puestos[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.85rem;font-weight:700;color:#495057;text-transform:uppercase;padding:.55rem;text-align:center}.col-num[_ngcontent-%COMP%]{width:50px;text-align:center}.col-orden[_ngcontent-%COMP%]{width:80px;text-align:center}.col-acciones[_ngcontent-%COMP%]{width:120px;text-align:center}.tabla-puestos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 1px 3px #00000014}.tabla-puestos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.55rem .65rem;font-size:.88rem;border-top:none!important}.acciones-puestos[_ngcontent-%COMP%]{white-space:nowrap;text-align:center}.action-btn[_ngcontent-%COMP%]{width:32px!important;height:32px!important;border-radius:6px!important;margin:0 3px;border:none!important;display:inline-flex;align-items:center;justify-content:center;padding:0!important;font-size:.9rem!important}.action-btn.delete[_ngcontent-%COMP%]{background-color:#ffeded!important;color:#c62828!important}.action-btn.edit[_ngcontent-%COMP%]{background-color:#e8f5e9!important;color:#1b5e20!important}.action-btn[_ngcontent-%COMP%]:hover{filter:brightness(.92);transform:scale(1.05);transition:.15s}"]});let b=v;return b})();export{Ae as CrearPuestosComponent};
