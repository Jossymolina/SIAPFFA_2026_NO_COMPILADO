import{b as V,e as k,j as z,x as W}from"./chunk-ZPMKEMCQ.js";import{C as B,e as F,k as T,l as N,z as $}from"./chunk-FIATBDAH.js";import{Ca as s,Lb as i,Mb as c,Na as u,Nb as M,Qb as y,Rb as j,Sa as v,Sb as w,U as g,V as x,Ya as S,cc as I,db as _,eb as C,fb as h,fc as D,gb as b,hb as E,ib as f,jb as e,kb as t,lb as p,sb as L,wb as P,xb as d}from"./chunk-XJSKPFVT.js";import"./chunk-OXVY4BEJ.js";function A(a,l){if(a&1&&(e(0,"span"),i(1," Total: "),e(2,"strong"),i(3),t(),i(4," cargos "),t()),a&2){let n=d(2);s(3),c((n.arregloLista==null?null:n.arregloLista.length)||0)}}function G(a,l){if(a&1&&(e(0,"span"),i(1," Mostrando "),e(2,"strong"),i(3),t(),i(4," de "),e(5,"strong"),i(6),t(),i(7," cargos "),t()),a&2){let n=d(2);s(3),c(n.listaFiltradaCargos().length),s(3),c((n.arregloLista==null?null:n.arregloLista.length)||0)}}function U(a,l){if(a&1&&(e(0,"tr")(1,"td",20),i(2),t(),e(3,"td"),i(4),t(),e(5,"td"),i(6),t(),e(7,"td"),i(8),t(),e(9,"td"),i(10),t(),e(11,"td",20),i(12),t(),e(13,"td",21),i(14),I(15,"currency"),t()()),a&2){let n=l.$implicit,r=l.$index;s(2),c(r+1),s(2),c(n.nombre),s(2),c(n.unidad),s(2),c(n.descripcion),s(2),c(n.Nombre_Puesto),s(2),c(n.grados),s(2),M(" ",D(15,7,n.monto,"","").replace(",","_").replace(".",",").replace("_",".")," ")}}function q(a,l){a&1&&(e(0,"tr")(1,"td",22),p(2,"i",23),i(3," No hay cargos que coincidan con el filtro. "),t()())}function O(a,l){if(a&1){let n=L();e(0,"div",0)(1,"div",2)(2,"h5",3),p(3,"i",4),i(4," Lista de cargos con pago "),t(),e(5,"button",5),P("click",function(){g(n);let o=d();return x(o.exportar("tabla_pxc"))}),p(6,"i",6),e(7,"span"),i(8,"Exportar"),t()()(),e(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"span",11),p(14,"i",12),t(),e(15,"input",13),w("ngModelChange",function(o){g(n);let m=d();return j(m.filtroCargos,o)||(m.filtroCargos=o),x(o)}),t()()()(),e(16,"div",14),S(17,A,5,1,"span",15)(18,G,8,2,"span",15),t(),e(19,"div",16)(20,"table",17)(21,"thead")(22,"tr")(23,"th",18),i(24,"#"),t(),e(25,"th"),i(26,"Fuerza / Dependencia"),t(),e(27,"th"),i(28,"Direcci\xF3n / Unidad"),t(),e(29,"th"),i(30,"Direcci\xF3n / Secci\xF3n"),t(),e(31,"th"),i(32,"Cargo"),t(),e(33,"th"),i(34,"Grados"),t(),e(35,"th",19),i(36,"Monto"),t()()(),e(37,"tbody"),b(38,U,16,11,"tr",null,h),_(40,q,4,0,"tr"),t()()()()()}if(a&2){let n=d();s(15),y("ngModel",n.filtroCargos),s(2),f("ngIf",!n.filtroCargos),s(),f("ngIf",n.filtroCargos),s(20),E(n.listaFiltradaCargos()),s(2),C(!n.arregloLista||n.listaFiltradaCargos().length===0?40:-1)}}function H(a,l){a&1&&(e(0,"div",1),i(1," No cuenta con los permisos "),t())}var ee=(()=>{let l=class l{constructor(r,o){this._ServiciosMensajesService=r,this._DatospersonalesService=o,this.arregloLista=[],this.filtroCargos="",this.permisoPersonal=!1}ngOnInit(){this.sacarlistado(),this.sacarPermisoPersonal()}sacarlistado(){this.arregloLista=[],this._ServiciosMensajesService.show(),this._DatospersonalesService.sacarListaCargosPorPago().subscribe({next:r=>{if(this._ServiciosMensajesService.hide(),r.error)return this._ServiciosMensajesService.mensajeMalo(r.error);if(r.mensaje)return this._ServiciosMensajesService.mensajeAdvertencia(r.mensaje);this.arregloLista=r.resultado},error:()=>{this._ServiciosMensajesService.hide(),this._ServiciosMensajesService.mensajeerrorServer()}})}exportar(r){this._DatospersonalesService.exportexcel2(r,"Exportado_siapffa_Pagos_cargo")}listaFiltradaCargos(){if(!this.arregloLista)return[];let r=(this.filtroCargos||"").toLowerCase().trim();return r?this.arregloLista.filter(o=>`
      ${o.nombre||""}           /* Fuerza / Dependencia */
      ${o.unidad||""}           /* Direcci\xF3n / Unidad   */
      ${o.descripcion||""}      /* Direcci\xF3n / Secci\xF3n  */
      ${o.Nombre_Puesto||""}    /* Cargo                */
      ${o.grados||""}           /* Grados               */
      ${o.monto||""}            /* Monto                */
    `.toLowerCase().includes(r)):this.arregloLista}sacarPermisoPersonal(){this.permisoPersonal=this._DatospersonalesService.verificarPermisos(["P_0001"])}};l.\u0275fac=function(o){return new(o||l)(u($),u(B))},l.\u0275cmp=v({type:l,selectors:[["app-lista-cargos-con-pago"]],decls:2,vars:1,consts:[[1,"card","shadow-lg","border-0","rounded-4","mt-3"],[1,"alert","alert-danger","mt-3","mb-0"],[1,"card-header","bg-danger","text-white","rounded-top-4","d-flex","justify-content-between","align-items-center","px-4"],[1,"mb-0","d-flex","align-items-center","gap-2"],[1,"pi","pi-briefcase","me-2"],["pButton","","type","button",1,"p-button-sm","p-button-success","p-button-rounded","d-flex","align-items-center","gap-2",3,"click"],[1,"pi","pi-file-excel"],[1,"card-body","px-4","pb-4","pt-3"],[1,"row","justify-content-end","mb-3"],[1,"col-md-6","col-lg-4"],[1,"input-group","input-group-sm"],[1,"input-group-text"],[1,"pi","pi-search"],["type","text","placeholder","Buscar por fuerza, unidad, cargo, grados...","name","filtroCargos",1,"form-control",3,"ngModelChange","ngModel"],[1,"mb-2","small","text-muted","d-flex","justify-content-between","px-1"],[4,"ngIf"],[1,"tabla-wrapper"],["id","tabla_pxc",1,"table","tabla-cargos-pago","table-hover","align-middle","mb-0"],[1,"col-num"],[1,"col-monto"],[1,"text-center"],[1,"text-end"],["colspan","7",1,"text-center","text-muted","py-3"],[1,"pi","pi-info-circle","me-1"]],template:function(o,m){o&1&&_(0,O,41,4,"div",0)(1,H,2,0,"div",1),o&2&&C(m.permisoPersonal?0:1)},dependencies:[N,F,W,V,k,z,T],encapsulation:2});let a=l;return a})();export{ee as ListaCargosConPagoComponent};
