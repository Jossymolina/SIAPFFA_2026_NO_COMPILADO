import{b as W}from"./chunk-MWNC3RUP.js";import{b as R,e as D,f as U,h as $,j as J,k as L,t as H,x as K}from"./chunk-ZPMKEMCQ.js";import"./chunk-QE2BREUU.js";import{a as Q}from"./chunk-HDHPZNG5.js";import"./chunk-JPTHL2WT.js";import"./chunk-VAG7FTYF.js";import{C as N,d as B,e as q,j as T,k as G,l as A,t as V,v as F,z}from"./chunk-FIATBDAH.js";import{Ca as a,Gb as h,Hb as O,Lb as n,Mb as l,Na as C,Nb as E,Ob as y,Pb as k,Sa as P,U as _,V as g,Ya as f,cc as b,fc as v,gc as M,ib as s,jb as e,kb as t,lb as p,pb as j,qb as I,sb as S,wb as x,xb as c,za as w}from"./chunk-XJSKPFVT.js";import"./chunk-OXVY4BEJ.js";function Z(r,d){if(r&1){let i=S();e(0,"p-card",7)(1,"div",8)(2,"button",9),x("click",function(){_(i);let o=c();return g(o.onAtras("menu/menu-busqueda"))}),p(3,"i",10),t(),e(4,"div",11),n(5," B\xFAsqueda de Personal "),e(6,"div",12),n(7," Filtra por identidad, nombre. "),t()()(),e(8,"form",13,0),x("ngSubmit",function(){_(i);let o=h(9),u=c();return g(u.buscar_persona(o.value))}),e(10,"div",14)(11,"div",15)(12,"label",16),n(13,"DNI/NOMBRE"),t(),p(14,"input",17,1),t(),e(16,"div",15)(17,"label",16),n(18,"Buscar"),t(),e(19,"button",18),p(20,"i",19),t()()()()()}if(r&2){let i=h(9);a(19),s("disabled",!i.valid)}}function ee(r,d){if(r&1){let i=S();e(0,"tr")(1,"td")(2,"i",33),x("click",function(){let o=_(i).$implicit,u=c(3);return g(u.verPerfil(o))}),t()(),e(3,"td"),n(4),t(),e(5,"td"),n(6),t(),e(7,"td"),n(8),t(),e(9,"td"),n(10),t(),e(11,"td"),n(12),t(),e(13,"td"),n(14),t(),e(15,"td"),n(16),t(),e(17,"td"),n(18),t(),e(19,"td"),n(20),t(),e(21,"td"),n(22),t(),e(23,"td"),n(24),t(),e(25,"td"),n(26),t()()}if(r&2){let i=d.$implicit;a(4),l(i.identidad),a(2),l(i.grado),a(2),l(i.categoria),a(2),l(i.nombre),a(2),l(i.apellido),a(2),l(i.serie),a(),O("color",i.activo===1?"blue":"red"),a(),E(" ",i.activo===1?"Activo":"Baja"," "),a(2),l(i.combatiente===1?"Si":"No"),a(2),l(i.pasaporte),a(2),l(i.religion),a(2),l(i.sangre),a(2),l(i.sexo)}}function te(r,d){if(r&1){let i=S();e(0,"div",4)(1,"div",21)(2,"div",22)(3,"button",23),x("click",function(){_(i);let o=c(2);return g(o.atras(1,0))}),p(4,"i",24),e(5,"span"),n(6,"Atr\xE1s"),t()(),e(7,"div",11),n(8," Resultados de b\xFAsqueda "),e(9,"div",12),n(10),b(11,"currency"),t()(),p(12,"div",25),t(),e(13,"div",26)(14,"div",27)(15,"label",28),n(16," Resultados: "),t(),e(17,"span"),n(18),b(19,"currency"),t()(),e(20,"div",29)(21,"table",30)(22,"thead",31)(23,"tr")(24,"th"),n(25,"Opt"),t(),e(26,"th"),n(27,"Identidad"),t(),e(28,"th"),n(29,"Grado"),t(),e(30,"th"),n(31,"Categor\xEDa"),t(),e(32,"th"),n(33,"Nombres"),t(),e(34,"th"),n(35,"Apellidos"),t(),e(36,"th"),n(37,"Serie"),t(),e(38,"th"),n(39,"Estado"),t(),e(40,"th"),n(41,"Combatiente"),t(),e(42,"th"),n(43,"Pasaporte"),t(),e(44,"th"),n(45,"Religi\xF3n"),t(),e(46,"th"),n(47,"Sangre"),t(),e(48,"th"),n(49,"G\xE9nero"),t()()(),e(50,"tbody"),f(51,ee,27,14,"tr",32),t()()()()()()}if(r&2){let i=c(2);a(10),E(" ",v(11,3,i.arregloResultados.length,"","")," registros encontrados "),a(8),l(v(19,7,i.arregloResultados.length,"","")),a(33),s("ngForOf",i.arregloResultados)}}function ne(r,d){if(r&1&&(e(0,"p-card",7),j(1),f(2,te,52,11,"div",20),I(),t()),r&2){let i=c();a(2),s("ngIf",i.arregloResultados.length!==0)}}function ie(r,d){if(r&1&&(e(0,"div",12),n(1),t()),r&2){let i=c(2);a(),k(" ",i.objetoConsultado==null?null:i.objetoConsultado.nombre," ",i.objetoConsultado==null?null:i.objetoConsultado.apellido," \u2022 ",i.objetoConsultado==null?null:i.objetoConsultado.grado," ")}}function oe(r,d){if(r&1&&(j(0),p(1,"img",54),I()),r&2){let i=c(3);a(),s("src",i._DatospersonalesService.url2+"sacarfoto/"+(i.objetoConsultado==null?null:i.objetoConsultado.foto),w)}}function ae(r,d){r&1&&p(0,"img",55)}function re(r,d){r&1&&(e(0,"div",49)(1,"div",56)(2,"span"),n(3,"Activo:"),t(),e(4,"strong"),n(5,"SI"),t()()())}function le(r,d){r&1&&(e(0,"div",49)(1,"div",57)(2,"span"),n(3,"Activo:"),t(),e(4,"strong"),n(5,"NO"),t()()())}function de(r,d){if(r&1&&(e(0,"div",49)(1,"div",52)(2,"span"),n(3,"Tipo de Baja:"),t(),e(4,"strong"),n(5),t()()()),r&2){let i=c(3);a(5),l(i.objetoConsultado==null?null:i.objetoConsultado.nombre_baja)}}function me(r,d){if(r&1&&(e(0,"div",49)(1,"div",52)(2,"span"),n(3,"Fecha de ejecuci\xF3n:"),t(),e(4,"strong"),n(5),b(6,"date"),t()()()),r&2){let i=c(3);a(5),l(v(6,1,i.objetoConsultado==null?null:i.objetoConsultado.fecha_baja_sistema,"medium","UTC"))}}function se(r,d){if(r&1&&(e(0,"div",49)(1,"div",52)(2,"span"),n(3,"Fecha de Baja:"),t(),e(4,"strong"),n(5),b(6,"date"),t()()()),r&2){let i=c(3);a(5),l(v(6,1,i.objetoConsultado==null?null:i.objetoConsultado.fecha_baja,"medium","UTC"))}}function ce(r,d){if(r&1&&(e(0,"div",58)(1,"div",59)(2,"p",60),n(3," \xDAltima Asignaci\xF3n: "),e(4,"strong"),n(5),t()()()()),r&2){let i=c(3);a(5),l(i.objetoConsultado==null?null:i.objetoConsultado.unidad_asignado)}}function pe(r,d){if(r&1&&(e(0,"div",58)(1,"div",59)(2,"p",60),n(3," Asignado: "),e(4,"strong"),n(5),t()()()()),r&2){let i=c(3);a(5),l(i.objetoConsultado==null?null:i.objetoConsultado.unidad_asignado)}}function ue(r,d){if(r&1&&(e(0,"div",38)(1,"div",15)(2,"div",39)(3,"div",40),f(4,oe,2,1,"ng-container",41)(5,ae,1,0,"ng-template",null,2,M),t(),e(7,"div",42)(8,"div",43),n(9),t(),e(10,"div",44),n(11),t(),e(12,"div",45),n(13),t(),e(14,"div",46),n(15," Serie: "),e(16,"span"),n(17),t()()()()(),e(18,"div",47)(19,"div",48)(20,"div",49)(21,"div",50)(22,"span"),n(23,"Nombre:"),t(),e(24,"strong"),n(25),t()()(),e(26,"div",49)(27,"div",50)(28,"span"),n(29,"Apellido:"),t(),e(30,"strong"),n(31),t()()(),e(32,"div",49)(33,"div",50)(34,"span"),n(35,"Identidad:"),t(),e(36,"strong"),n(37),t()()(),e(38,"div",49)(39,"div",50)(40,"span"),n(41,"Fuerza:"),t(),e(42,"strong"),n(43),t()()(),e(44,"div",49)(45,"div",50)(46,"span"),n(47,"G\xE9nero:"),t(),e(48,"strong"),n(49),t()()(),e(50,"div",49)(51,"div",50)(52,"span"),n(53,"Combatiente:"),t(),e(54,"strong"),n(55),t()()(),e(56,"div",49)(57,"div",50)(58,"span"),n(59,"Grado / Rango Actual:"),t(),e(60,"strong"),n(61),t()()(),f(62,re,6,0,"div",51)(63,le,6,0,"div",51)(64,de,6,1,"div",51)(65,me,7,5,"div",51),e(66,"div",49)(67,"div",52)(68,"span"),n(69,"Fecha de Ingreso:"),t(),e(70,"strong"),n(71),b(72,"date"),t()()(),f(73,se,7,5,"div",51)(74,ce,6,1,"div",53)(75,pe,6,1,"ng-template",null,3,M),t()()()),r&2){let i=h(6),m=h(76),o=c(2);a(4),s("ngIf",(o.objetoConsultado==null?null:o.objetoConsultado.foto)!==null)("ngIfElse",i),a(5),y(" ",o.objetoConsultado==null?null:o.objetoConsultado.nombre," ",o.objetoConsultado==null?null:o.objetoConsultado.apellido," "),a(2),E(" ",o.objetoConsultado==null?null:o.objetoConsultado.grado," "),a(2),E(" ",o.objetoConsultado==null?null:o.objetoConsultado.fuerza," "),a(4),l(o.objetoConsultado==null?null:o.objetoConsultado.serie),a(8),l(o.objetoConsultado==null?null:o.objetoConsultado.nombre),a(6),l(o.objetoConsultado==null?null:o.objetoConsultado.apellido),a(6),l(o.objetoConsultado==null?null:o.objetoConsultado.identidad),a(6),l(o.objetoConsultado==null?null:o.objetoConsultado.fuerza),a(6),l(o.objetoConsultado==null?null:o.objetoConsultado.sexo),a(6),l((o.objetoConsultado==null?null:o.objetoConsultado.combatiente)===1?"Si":"No"),a(6),l(o.objetoConsultado==null?null:o.objetoConsultado.grado),a(),s("ngIf",o.objetoConsultado.activo===1),a(),s("ngIf",o.objetoConsultado.activo===2),a(),s("ngIf",o.objetoConsultado.activo===2),a(),s("ngIf",o.objetoConsultado.activo===2),a(6),l(v(72,22,o.objetoConsultado==null?null:o.objetoConsultado.fecha_ingreso,"medium","UTC")),a(2),s("ngIf",o.objetoConsultado.activo===2),a(),s("ngIf",o.objetoConsultado.activo===2)("ngIfElse",m)}}function fe(r,d){if(r&1){let i=S();e(0,"p-card"),j(1),e(2,"div",4)(3,"div",21)(4,"div",34)(5,"button",23),x("click",function(){_(i);let o=c();return g(o.atras(0,1))}),p(6,"i",35),e(7,"span"),n(8,"Atr\xE1s"),t()(),e(9,"div",11),n(10," Perfil del personal "),f(11,ie,2,3,"div",36),t(),p(12,"div",25),t(),f(13,ue,77,26,"div",37),t()(),I(),t()}if(r&2){let i=c();a(11),s("ngIf",i.objetoConsultado),a(2),s("ngIf",i.objetoConsultado)}}var Ie=(()=>{let d=class d{constructor(m,o,u,X){this._DatospersonalesService=m,this._Activatedroute=o,this._ServiciosMensajesService=u,this._Router=X,this.banderadeCarga=0,this.segundaVentana=0,this.arregloResultados=[],this._Activatedroute.params.subscribe(Y=>{this.tipoConsulta=parseInt(Y.id)})}ngOnInit(){this.usuarioLogin=JSON.parse(localStorage.getItem("user_login")).user}buscar_persona(m){console.log(m),this._ServiciosMensajesService.show(),this._DatospersonalesService.busquedaglobal(m).subscribe({next:o=>{if(console.log(o),this._ServiciosMensajesService.hide(),o.error)return this._ServiciosMensajesService.mensajeMalo(o.error);if(o.mensaje)return this._ServiciosMensajesService.mensajeMalo(o.mensaje);this.atras(0,1),this.arregloResultados=o.resultado},error:()=>{this._ServiciosMensajesService.hide(),this._ServiciosMensajesService.mensajeerrorServer()}})}atras(m,o){this.tipoConsulta=m,this.segundaVentana=o}verificarPermiso(m){return this._DatospersonalesService.verificarPermisos(m)}verPerfil(m){this.objetoConsultado=m,this.atras(0,2)}onAtras(m){m&&this._Router.navigate([m])}};d.\u0275fac=function(o){return new(o||d)(C(N),C(V),C(z),C(F))},d.\u0275cmp=P({type:d,selectors:[["app-busqueda-global"]],decls:4,vars:3,consts:[["f","ngForm"],["cadena","ngModel"],["sinFoto",""],["asignadoActual",""],[1,"form-wrapper"],["class","form-card",4,"ngIf"],[4,"ngIf"],[1,"form-card"],[1,"form-header"],["pButton","","type","button","icon","pi pi-arrow-left","label","Atr\xE1s",1,"btn-back-modern",3,"click"],[1,"pi","pi-arrow-left"],[1,"form-title"],[1,"form-subtitle"],["id","form-busqueda",1,"mt-3",3,"ngSubmit"],[1,"row","g-3"],[1,"col-12","col-md-4"],[1,"form-label"],["pInputText","","type","text","name","cadena","ngModel","","placeholder","Ingresar dato...","required","",1,"w-100"],["pButton","","type","submit","label","Buscar",1,"btn-back-modern",3,"disabled"],[1,"pi","pi-search"],["class","form-wrapper",4,"ngIf"],[1,"card","form-card","p-3"],[1,"form-header","mb-2"],["type","button","title","Atr\xE1s",1,"btn","btn-sm","btn-back-modern",3,"click"],["aria-hidden","true",1,"fa","fa-fast-backward"],[1,"d-none","d-sm-block"],[1,"mt-1"],[1,"mb-2"],[1,"form-label","mb-0"],[1,"table-responsive",2,"max-height","400px","overflow-y","auto"],[1,"table","table-sm","table-hover","align-middle"],[1,"table-light"],[4,"ngFor","ngForOf"],["title","Ver perfil",1,"pi","pi-eye",2,"cursor","pointer",3,"click"],[1,"form-header","mb-3"],[1,"fas","fa-undo"],["class","form-subtitle",4,"ngIf"],["class","row g-3 align-items-start mt-1",4,"ngIf"],[1,"row","g-3","align-items-start","mt-1"],[1,"profile-photo-card"],[1,"profile-photo-frame"],[4,"ngIf","ngIfElse"],[1,"profile-photo-meta"],[1,"profile-name"],[1,"profile-rank"],[1,"profile-force-badge"],[1,"profile-serie"],[1,"col-12","col-md-8"],[1,"row","g-2"],[1,"col-md-6"],[1,"form-control","d-flex","justify-content-between","align-items-center"],["class","col-md-6",4,"ngIf"],[1,"form-control","bg-info","text-white","d-flex","justify-content-between","align-items-center"],["class","col-md-12",4,"ngIf","ngIfElse"],["alt","Image did not load...",1,"profile-photo-img",3,"src"],["src","../../../assets/fotoperfil.png","alt","Image did not load...",1,"profile-photo-img"],[1,"form-control","bg-success","text-white","d-flex","justify-content-between","align-items-center"],[1,"form-control","bg-danger","text-white","d-flex","justify-content-between","align-items-center"],[1,"col-md-12"],[1,"form-control","bg-success","text-white"],[1,"mb-0"]],template:function(o,u){o&1&&(e(0,"div",4),f(1,Z,21,1,"p-card",5)(2,ne,3,1,"p-card",5)(3,fe,14,2,"p-card",6),t()),o&2&&(a(),s("ngIf",u.segundaVentana===0),a(),s("ngIf",u.segundaVentana===1),a(),s("ngIf",u.segundaVentana===2))},dependencies:[A,B,q,K,L,R,D,U,H,J,$,Q,W,G,T],styles:[".form-wrapper[_ngcontent-%COMP%]{margin-top:1.2rem;display:flex;justify-content:center;width:100%}.form-card[_ngcontent-%COMP%]{border-radius:1.5rem!important;border:none;box-shadow:0 4px 10px #0f172a0f;width:100%;max-width:960px}.form-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.75rem;padding-bottom:.5rem;border-bottom:1px solid #e5e7eb}.form-title[_ngcontent-%COMP%]{flex:1;text-align:center;font-size:.95rem;font-weight:600}.form-subtitle[_ngcontent-%COMP%]{font-size:.75rem;color:#6c757d;margin-top:.1rem}.btn-back[_ngcontent-%COMP%]{padding-inline:.4rem}.btn-search[_ngcontent-%COMP%]{padding-inline:.7rem}.form-label[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;color:#4b5563;margin-bottom:.25rem;display:block}input[pInputText][_ngcontent-%COMP%], .p-dropdown[_ngcontent-%COMP%]{font-size:.85rem}@media (max-width: 575.98px){.form-card[_ngcontent-%COMP%]{border-radius:1.2rem!important}.form-header[_ngcontent-%COMP%]{flex-direction:row;align-items:center}.form-title[_ngcontent-%COMP%]{font-size:.9rem}.form-subtitle[_ngcontent-%COMP%]{display:none}}.btn-back-modern[_ngcontent-%COMP%]{background:#f1f5f9!important;border:1px solid #d8dee9!important;color:#0d6efd!important;border-radius:1rem!important;padding:.35rem .9rem!important;font-size:.82rem!important;font-weight:500!important;display:flex;align-items:center;gap:.35rem}.btn-back-modern[_ngcontent-%COMP%]   .p-button-icon[_ngcontent-%COMP%]{font-size:.9rem;color:#0d6efd!important}.btn-back-modern[_ngcontent-%COMP%]:hover{background:#e3e9f2!important;border-color:#c8d0da!important}.form-wrapper[_ngcontent-%COMP%]{width:100%}.form-card[_ngcontent-%COMP%]{border-radius:14px;background:#fff}.form-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:12px}.form-title[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:1.2rem;line-height:1.3}.form-subtitle[_ngcontent-%COMP%]{font-size:.85rem;font-weight:500;opacity:.75;margin-top:4px}.btn-back-modern[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;border-radius:20px;padding:4px 12px}.profile-photo-card[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-radius:14px;padding:12px;text-align:center}.profile-photo-frame[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.profile-photo-img[_ngcontent-%COMP%]{width:160px;height:160px;object-fit:cover;border-radius:50%;border:3px solid #dee2e6}.profile-photo-meta[_ngcontent-%COMP%]{margin-top:12px}.profile-name[_ngcontent-%COMP%]{font-weight:700;font-size:1rem}.profile-rank[_ngcontent-%COMP%]{font-size:.9rem;opacity:.8}.profile-force-badge[_ngcontent-%COMP%]{margin-top:4px;font-size:.75rem;padding:4px 10px;background:#0d6efd;color:#fff;border-radius:12px;display:inline-block}.profile-serie[_ngcontent-%COMP%]{margin-top:6px;font-size:.8rem;opacity:.75}.form-control[_ngcontent-%COMP%]{min-height:42px;display:flex;align-items:center;justify-content:space-between;gap:10px;padding:8px 12px;font-size:.85rem;white-space:normal}.form-control[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex-shrink:0;font-weight:500;opacity:.8}.form-control[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{text-align:right;word-break:break-word}.form-control.bg-success[_ngcontent-%COMP%], .form-control.bg-danger[_ngcontent-%COMP%], .form-control.bg-info[_ngcontent-%COMP%]{border:none}.form-control[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;width:100%;word-break:break-word}@media (max-width: 768px){.form-header[_ngcontent-%COMP%]{grid-template-columns:1fr;text-align:center}.btn-back-modern[_ngcontent-%COMP%]{justify-self:start}.form-control[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.form-control[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{text-align:left}}"]});let r=d;return r})();export{Ie as BusquedaGlobalComponent};
